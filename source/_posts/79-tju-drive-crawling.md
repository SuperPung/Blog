---
url: tju-drive-crawling
title: ç®€å•çš„çˆ¬è™«å°è¯•
date: 2021-05-22 19:30:07
categories: [æŠ€æœ¯]
tags: [Python]
---

ç®—æ˜¯ç¬¬ä¸€æ¬¡å†™çš„ä¸€ä¸ªå°å·¥å…·å§ã€‚

<!--more-->

GitHubï¼šhttps://github.com/SuperPung/TJU-Drive-Crawling/

# å‰è¨€

å›æƒ³èµ·ä¸Šä¸€æ¬¡å†™ Python å°é¡¹ç›®ï¼Œè¿˜æ˜¯ä¸€å¹´ä¹‹å‰å­¦ä¹  Python çš„æ—¶å€™ã€‚å½“æ—¶çœ‹ä¹¦ï¼ˆpcc2eï¼‰æ—¶æ•²äº†ä¸€éä¹¦åé¢å‡ ç« çš„é¡¹ç›®ï¼Œå°¤å…¶æ˜¯å¤–æ˜Ÿäººå…¥ä¾µçš„å°æ¸¸æˆï¼Œå¾ˆæœ‰è¶£ã€‚

æ—¶éš”ä¸€å¹´ï¼Œé¢å¯¹æ¯æ¬¡æ‰“å¼€éƒ½éœ€è¦è¾“å…¥å¯†ç çš„å¤©å¤§äº‘ç›˜ï¼Œè¿˜æœ‰å¥½è¯è€å¸ˆç•™ä½œä¸šã€æ‰¹ä½œä¸š follow his heart çš„é¢‘ç‡ï¼Œæˆ‘å†³å®šå°è¯•å†™ä¸ªå°çˆ¬è™«ï¼Œèƒ½åœ¨äº‘ç›˜æ›´æ–°çš„æ—¶å€™æé†’æˆ‘ã€‚

çˆ¬è™«ï¼Œå­¦ Python ä¹‹å‰å°±å¬è¯´äº†ï¼Œå¾ˆå–œæ¬¢è¿™ç§æ‡’äººå·¥å…·ã€‚å‰æ®µæ—¶é—´å¼€å§‹ç»å¸¸é€› GitHubï¼Œä¹Ÿçœ‹åˆ°è¿‡ä¸€äº›å°é¡¹ç›®ã€‚äºæ˜¯æˆ‘æ‰“å¼€äº†è®¸ä¹…æœªç”¨è¿‡çš„ Pycharmï¼Œæ–°å»ºäº†ä¸€ä¸ªé¡¹ç›®ã€‚

> JetBrains ç«Ÿç„¶ä¸æ”¯æŒ edu é‚®ç®±äº†ï¼ŒğŸ‘´å­¦ç”Ÿè®¤è¯é©¬ä¸Šå°±åˆ°æœŸï¼Œåªèƒ½ç”¨å­¦ä¿¡ç½‘èµ„æ–™è®¤è¯ï¼Œå¥½å‡ å¤©ä¹Ÿä¸å‡ºç»“æœâ€¦â€¦

å†™è¿™ç¯‡æ–‡ç« æ—¶ï¼Œè¿™ä¸ªå°å·¥å…·å·²ç»å†™å®Œäº†ã€‚æ‰€ä»¥æœ‰äº›é‡æ„çš„è¿‡ç¨‹å¯èƒ½ä¼šå¿˜è®°äº†ã€‚

# Crawling

ç”¨ Chrome æŠ“åŒ…ï¼Œåˆ†æåˆ°å¤©å¤§äº‘ç›˜çš„ url å®é™…ä¸Šæ˜¯ http://pan.tju.edu.cn:9123/v1/link?method=listdirï¼Œå†™ä¸€ä¸ªè¯·æ±‚å¤´ `payload_header`ï¼š

```python
payload_header = {
    "Content-Type": "text/plain;charset=UTF-8",
    "Referer": "http://pan.tju.edu.cn/",
    "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) "
                  "Chrome/90.0.4430.212 Safari/537.36 "
}
```

è¯·æ±‚æ•°æ®éœ€è¦å‘å‡ºä¸€ä¸ª json `data`ï¼š

```python
    data = {
        "link": link,
        "password": password,
        "by": "name",
        "sort": "asc"
    }
```

å…¶ä¸­ link å°±æ˜¯å¤©å¤§äº‘ç›˜é“¾æ¥çš„å 32 ä½ï¼Œpassword å°±æ˜¯å¯†ç ã€‚

æœ€åé€šè¿‡ POST è¯·æ±‚å¾—åˆ°å“åº”ï¼š

```python
    s = requests.session()
    get_root = s.post(url, data=json.dumps(data), headers=payload_header)
    return get_root.text
```

# å“åº”åˆ†æ

å¾—åˆ°å“åº”åï¼Œéœ€è¦å¯¹å†…å®¹åˆ†æã€‚å°è¯•ç”¨é¢å‘å¯¹è±¡ï¼Œä½†æœ€ç»ˆé€‰æ‹©äº†å‡½æ•°ã€‚é€šè¿‡é€’å½’å°†æ–‡ä»¶ç›®å½•è¾“å‡ºã€‚

æ¯æ¬¡åˆ†æåè¾“å‡ºæ–‡ä»¶åˆ—è¡¨ï¼Œä»¥ json æ ¼å¼å­˜æ”¾åˆ°æœ¬åœ°ç›®å½•ï¼Œä¸‹ä¸€æ¬¡åˆ†æåˆ™ä¸æœ¬åœ°æ¯”è¾ƒï¼Œè¿™æ ·å°±å¯ä»¥çŸ¥é“å“ªäº›æ–‡ä»¶æ›´æ–°äº†ã€‚

å› ä¸ºä½¿ç”¨äº†é€’å½’ï¼Œæ‰€ä»¥å¾ˆå¤šå°åŠŸèƒ½åˆç”¨å‡½æ•°é‡æ„äº†ä¸€ä¸‹ã€‚

# é‚®ä»¶æœåŠ¡

é€šè¿‡ smtplib å®ç°ã€‚

# éƒ¨ç½²

éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¹Ÿèµ°äº†å¼¯è·¯ï¼Œæ ¹æœ¬åŸå› æ˜¯è·¯å¾„çš„é—®é¢˜ã€‚

æœ€ååœ¨è„šæœ¬ä¸Šå…ˆåŠ ä¸€å¥ cd è§£å†³ã€‚

# åè®°

ä¸€å…±èŠ±äº†ä¸€å¤©å¤šä¸€ç‚¹çš„æ—¶é—´å®Œæˆï¼Œè¿˜æ˜¯å¾ˆæœ‰è¶£çš„ã€‚
