<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>SuperPung</title>
  
  <subtitle>Follow Your Heart</subtitle>
  <link href="https://blog.superpung.xyz/atom.xml" rel="self"/>
  
  <link href="https://blog.superpung.xyz/"/>
  <updated>2021-07-13T02:49:32.569Z</updated>
  <id>https://blog.superpung.xyz/</id>
  
  <author>
    <name>SUPER</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>在 swiftUI 中自定义修饰器</title>
    <link href="https://blog.superpung.xyz/custom-modifier/"/>
    <id>https://blog.superpung.xyz/custom-modifier/</id>
    <published>2021-07-13T02:41:14.000Z</published>
    <updated>2021-07-13T02:49:32.569Z</updated>
    
    <content type="html"><![CDATA[<p>学习 swiftUI 的记录。</p><a id="more"></a><p>首先定义结构体，在其中对内容修饰：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Watermark</span>: <span class="title">ViewModifier</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> text: <span class="type">String</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">body</span>(<span class="params">content</span>: <span class="type">Content</span>)</span> -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span>(alignment: .bottomTrailing) &#123;</span><br><span class="line">            content</span><br><span class="line">            <span class="type">Text</span>(text)</span><br><span class="line">                .font(.caption)</span><br><span class="line">                .foregroundColor(.white)</span><br><span class="line">                .padding(<span class="number">5</span>)</span><br><span class="line">                .background(<span class="type">Color</span>.black)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后根据此结构体，定义 <code>extension</code>，在其中定义修饰器函数：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">watermarked</span>(<span class="params">with</span> <span class="params">text</span>: <span class="type">String</span>)</span> -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.modifier(<span class="type">Watermark</span>(text: text))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最终只需调用 <code>extension</code> 中的函数即可实现：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Color</span>.green</span><br><span class="line">    .frame(width: <span class="number">300</span>, height: <span class="number">200</span>)</span><br><span class="line">    .watermarked(with: <span class="string">&quot;Hacking with Swift&quot;</span>)</span><br></pre></td></tr></table></figure><p>效果图：</p><p><img src="https://super-bucket1.oss-cn-beijing.aliyuncs.com/image-20210713104903030.png" alt="image-20210713104903030"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;学习 swiftUI 的记录。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Swift" scheme="https://blog.superpung.xyz/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>关于最近</title>
    <link href="https://blog.superpung.xyz/rev-1/"/>
    <id>https://blog.superpung.xyz/rev-1/</id>
    <published>2021-07-07T04:00:37.000Z</published>
    <updated>2021-07-07T07:33:13.932Z</updated>
    
    <content type="html"><![CDATA[<p>小记。</p><a id="more"></a><p>大学生活度过了一半，仍旧在学期内忙碌、假期内无所事事两个状态间切换，却没有留下些什么。</p><p>最近整理了一下两年来用过的资料，就放在 <a href="https://github.com/SuperPung/TJU-CourseSharing">这里</a> 了，欢迎有缘人看到提提 Issue 或 PR……</p><p>希望这个项目可以帮助到更多的人吧……</p><hr><p>2020 年感觉经历了很多，本想在寒假的时候认真总结一下，但却又想不出什么值得纪念的事情。</p><p>2020 年可能是我向外迈出的第一步吧，报名了新生小班，认识了更多的人；参加了社团，当个部长，组织了几次活动，还算是有些成就感；参加集训，得了个小奖；参加了一个项目，最后也结项了，顺带学了 Python……</p><p>有些事情确实没有白做，但得到的同时也伴有失去。没有什么两全其美的办法，尽力去弥补就好了。</p><p>在此记录一下，以纪念逝去的 2020。</p><hr><p>第一次接触 macOS 是官网的 Mojave 介绍，壁纸随着时间的推移，光影也在变化。后来了解到了黑苹果，最后熬了几个夜终于给装好了，用了一年多没出现异常。</p><p>后来换了真正的 MacBook，原来的电脑也结束了使命，重装回了 Windows。</p><p>在此记录一下，以纪念陪伴我一年的 Hackintosh。</p><hr><p>学期初立志好好学习，到最后还是考试周破防。希望后半段大学生活别再荒废了吧……</p><p>谈不上精彩，也不至于太糟。</p><p>在此记录一下，悟以往之不谏，知来者之可追。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;小记。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Review" scheme="https://blog.superpung.xyz/tags/Review/"/>
    
  </entry>
  
  <entry>
    <title>《数据库原理》笔记</title>
    <link href="https://blog.superpung.xyz/fcds-notes/"/>
    <id>https://blog.superpung.xyz/fcds-notes/</id>
    <published>2021-06-28T12:56:49.000Z</published>
    <updated>2021-06-28T12:58:07.292Z</updated>
    
    <content type="html"><![CDATA[<p>《数据库系统基础教程》《数据库系统全书》</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;《数据库系统基础教程》《数据库系统全书》&lt;/p&gt;
</summary>
      
    
    
    
    
    <category term="Notes" scheme="https://blog.superpung.xyz/tags/Notes/"/>
    
  </entry>
  
  <entry>
    <title>《数字逻辑与数字系统》笔记</title>
    <link href="https://blog.superpung.xyz/ddca-notes/"/>
    <id>https://blog.superpung.xyz/ddca-notes/</id>
    <published>2021-06-24T07:10:29.000Z</published>
    <updated>2021-06-24T07:12:47.872Z</updated>
    
    <content type="html"><![CDATA[<p>《数字设计和计算机体系结构》</p><a id="more"></a>]]></content>
    
    
    <summary type="html">&lt;p&gt;《数字设计和计算机体系结构》&lt;/p&gt;</summary>
    
    
    
    
    <category term="Notes" scheme="https://blog.superpung.xyz/tags/Notes/"/>
    
  </entry>
  
  <entry>
    <title>《形式化方法》笔记</title>
    <link href="https://blog.superpung.xyz/fsv-notes/"/>
    <id>https://blog.superpung.xyz/fsv-notes/</id>
    <published>2021-06-22T12:50:21.000Z</published>
    <updated>2021-06-22T12:55:51.243Z</updated>
    
    <content type="html"><![CDATA[<p>Formal Specification Using Z by David Lightfoot</p><a id="more"></a>]]></content>
    
    
    <summary type="html">&lt;p&gt;Formal Specification Using Z by David Lightfoot&lt;/p&gt;</summary>
    
    
    
    
    <category term="Notes" scheme="https://blog.superpung.xyz/tags/Notes/"/>
    
  </entry>
  
  <entry>
    <title>宣言</title>
    <link href="https://blog.superpung.xyz/declaration/"/>
    <id>https://blog.superpung.xyz/declaration/</id>
    <published>2021-06-11T03:39:31.000Z</published>
    <updated>2021-06-11T04:20:28.816Z</updated>
    
    <content type="html"><![CDATA[<p>宣言</p><a id="more"></a><p style="TEXT-ALIGN: center" align="center"><font color="navy"><strong>社会主义没有辜负中国</strong></font></p><p style="TEXT-ALIGN: center" align="center"><font color="navy">宣言</font></p><p>　　习近平总书记在党史学习教育动员大会上深刻指出，对共产主义的信仰，对中国特色社会主义的信念，是共产党人的政治灵魂，是共产党人经受住任何考验的精神支柱，强调党的百年奋斗历程和伟大成就，是我们增强道路自信、理论自信、制度自信、文化自信最坚实的基础。总书记的话语，掷地有声、坚定豪迈，深刻揭示了社会主义、共产主义与百年求索、百年奋斗的内在关系，彰显了中国共产党人沿着中国特色社会主义这条唯一正确道路前进的坚毅和执着。</p><p>　　百年历程，许多人和事仍然历历在目，许多呐喊和高歌犹在耳旁。走过风霜雪雨，创造人间奇迹，我们有义务用胜利告慰先烈：社会主义没有辜负中国！我们有责任让历史告诉未来：社会主义不会辜负中国！</p><p>　　<strong>（一）</strong></p><p>　　历史的偶然中往往带着必然。19世纪40年代，古老的中国被列强的坚船利炮打开了国门，中国命运从此进入前所未有的悲惨境地。几乎是同样的年代，在资本主义发展方兴未艾的欧洲，马克思、恩格斯开始了对科学社会主义、对人类解放进步事业的伟大探索。</p><p>　　鸦片战争后的中国，积贫积弱、任人宰割。“四万万人齐下泪，天涯何处是神州”。谭嗣同的这句诗，字字血泪、字字彷徨。太平天国、戊戌变法、义和团运动、辛亥革命……中国人在黑暗中苦苦摸索救亡图存之路；改良主义、自由主义、社会达尔文主义、无政府主义、实用主义……种种西方的理论和学说都被引进作为强国富民的药方。一个个方案都试过了，却又屡屡化为泡影。一条条道路都探寻了，却撞得头破血流。“无量头颅无量血，可怜购得假共和。”列强横行、军阀混战，人民水深火热，第一次世界大战更是戳穿了资本主义文明看似美好的幻象。无数仁人志士一次次地用生命和灵魂发问：中国的出路在哪里？民族的希望在哪里？</p><p>　　十月革命一声炮响，给中国送来了马克思列宁主义。这是一场伟大的历史之约，这是一个郑重的历史之诺！封建社会上千年来的枷锁太严密，非进行彻底的社会改造不能除旧布新。帝国主义带给中国人的压迫太沉重，非动员几万万劳苦大众的伟力不能与之相抗。</p><p>　　李大钊赞叹：“人道的警钟响了！自由的曙光现了！试看将来的环球，必是赤旗的世界！”陈独秀宣示：“十八世纪法兰西的政治革命，二十世纪俄罗斯的社会革命，当时的人都对着他们极口痛骂；但是后来的历史家都要把他们当做人类社会变动和进化的大关键。”年轻的毛泽东疾呼：“时机到了！世界的大潮卷得更急了！洞庭湖的闸门动了，且开了！浩浩荡荡的新思潮业已奔腾澎湃于湘江两岸了！”</p><p>　　1920年乍暖还寒的春天，29岁的陈望道在老家浙江义乌分水塘的柴房里，废寝忘食两个月，第一次完整译出了《共产党宣言》，首印1000册即刻售罄，到1926年重印再版达17次之多。先进的、不屈的中国人经过反复比较、反复推求，选择了马克思主义作为救国救民的道路，作为始终不渝的志向。</p><p>　　1921年7月，以马克思主义为指导思想、以共产主义为奋斗目标的政党——中国共产党诞生，胸怀着信念、嘱托和梦想，在上海石库门的旭日里、在嘉兴南湖的碧波中毅然起航。从此以后，社会主义的火种就在东方点燃，曾经困顿无望的中国就有了方向！</p><p>　　<strong>（二）</strong></p><p>　　大革命失败后，共产党员夏明翰在汉口被捕，英勇就义前给妻子写信诀别：“抛头颅、洒热血，明翰早已视等闲。各取所需终有日，革命事业代代传。红珠留着相思念，赤云孤苦望成全。坚持革命继吾志，誓将真理传人寰。”在那些风雨如晦的岁月里，像夏明翰这样为了共产主义信仰九死而不悔、坚信革命理想一定会实现的烈士，何止千千万万。他们一旦认定了信仰和主义，就再也没有彷徨过、动摇过，不惜用青春和鲜血浇灌“共产花开”。</p><p>　　这个信仰和主义，闪耀着理想烛照人心的光芒。《共产党宣言》描绘道：“代替那存在着阶级和阶级对立的资产阶级旧社会的，将是这样一个联合体，在那里，每个人的自由发展是一切人自由发展的条件。”在社会主义新世界里，人的价值居于第一位，没有剥削、没有压迫，劳动光荣、劳工至上，人人平等富足，彼此亲如一家……这是超越资本主义世界的新世界，也是中华民族自古以来向往的“天下大同”，吸引着无数先进分子心驰之、神往之、践行之。</p><p>　　这个信仰和主义，揭示着社会发展演化的规律。世界大势、浩浩汤汤，顺之者生、逆之者亡。中国共产党是工人阶级的先锋队，代表着先进生产力的方向，代表着历史前进的潮流。经过科学理论武装、掌握社会发展规律的党，就具备了引领社会变革、推进正义事业的自觉，就具备了无坚不摧、百折不挠的力量。</p><p>　　这个信仰和主义，指引着革命走向胜利的道路。以毛泽东为主要代表的中国共产党人，用马克思主义立场观点方法分析中国国情、解决中国问题，鲜明提出中国革命的任务是推翻帝国主义、封建主义、官僚资本主义“三座大山”的压迫，中国革命的道路是农村包围城市、武装夺取政权，中国革命的力量是工人阶级、农民阶级、小资产阶级和一定条件下的民族资产阶级，无产阶级是领导力量、人民是真正的英雄，中国革命要分民主主义革命和社会主义革命两个阶段进行……这些科学认识，处处闪耀着马克思主义真理的光辉，引领着中国革命澎湃向前。</p><p>　　革命理想高于天。正是在理想信念的火炬下，我们党广泛发动工农群众，敢于突击冲锋，成功推进了北伐战争；正是在理想信念的火炬下，幸存的共产党人掩埋了被反动派屠杀的同伴的尸首，拿起武器、走进山林，投入新的战斗；正是在理想信念的火炬下，红军将士闯天险、战强敌，爬雪山、过草地，“风雨浸衣骨更硬，野菜充饥志越坚”，完成了彪炳人类史册的二万五千里长征；正是在理想信念的火炬下，党和人民用坚忍不拔、血战到底，书写了抗击日本军国主义的民族壮歌，取得了抵御外侮的最终胜利；正是在理想信念的火炬下，英勇的人民解放军只用三年时间就打垮了国民党反动派800万军队，彰显了什么是“天若有情天亦老，人间正道是沧桑。”</p><p>　　“批判的武器当然不能代替武器的批判，物质力量只能用物质力量来摧毁。”28年浴血奋战，28年砥砺前行，我们的国家从任人欺辱的“东亚病夫”变成令世界刮目相看的“东方醒狮”，我们的人民从做牛做马的奴隶变成扬眉吐气的主人。中国革命的胜利，就是中国共产党人运用马克思主义挽救中国的伟大实践，就是科学真理彰显力量的伟大历程！</p><p>　　<strong>（三）</strong></p><p>　　1949年6月30日，毛泽东发表《论人民民主专政》提出，我们要经过人民共和国，由农业国进到工业国，由新民主主义社会进到社会主义社会和共产主义社会。中华人民共和国的成立，是科学社会主义原则与中国革命实际相结合的历史结果，也标志着人类进步事业和社会主义力量的发展壮大，开启了社会主义在世界东方的伟大时代。</p><p>　　这是一个革故鼎新、改天换地的时代。面对重重困难考验，中国共产党带领人民迅速医治战争创伤、恢复国民经济，以中国独有的形式实现了对农业、手工业、资本主义工商业的社会主义改造，创造性地完成了由新民主主义革命向社会主义革命的转变，成功实现了中国历史上最深刻最伟大的社会变革。轰轰烈烈的土地改革，使三亿多农民无偿获得七亿亩土地和生产资料；1954年宪法，用根本大法的形式把人民民主和社会主义的原则固定下来；人民代表大会制度、中国共产党领导的多党合作和政治协商制度、民族区域自治制度，构筑起社会主义制度的“四梁八柱”……在这个古老而青春的国度，中国人民建设着社会主义的巍巍大厦，品尝着幸福生活的滋味。</p><p>　　这是一个朝气蓬勃、激情燃烧的时代。“每一秒钟都为创造社会主义社会而劳动”。规划于清末的成渝铁路在新中国成立前的40多年里还是地图上一条虚线，1950年正式开工后只用两年就全线贯通；“一五”期间156个重点工程、694个建设项目全部建成，打下了社会主义工业化的坚实基础；治淮治黄、治理长江取得明显效果，农田水利建设在全国热火朝天铺开；全国城乡卫生医疗网基本形成，天花、霍乱、血吸虫病、疟疾、鼠疫等疾病，或被根除、或得到有效防治……新生的人民政权唤醒了巨大的生产力，新生的社会主义制度激活了人民的能量、促进了人民的福祉。</p><p>　　这是一个英雄辈出、斗志昂扬的时代。为了和平，志愿军将士出国作战，谱写了以“钢少气多”力克“钢多气少”的雄壮史诗；为摘掉“贫油少油”的帽子，“铁人”王进喜带领钻井队战天斗地，“宁肯少活20年，拼命也要拿下大油田”；为改变贫穷落后的面貌，县委书记的榜样焦裕禄带领兰考人民整治“三害”，“生也沙丘，死也沙丘，父老生死系”；为打牢国家自立自强的基石，钱学森、钱三强、邓稼先等一大批科研工作者把汗水和热血洒在茫茫戈壁，创造了“两弹一星”的奇迹……无数有名字的英雄和没有留下名字的英雄，用血肉之躯和坚强臂膀，扛起民族的责任、共和国的荣光。</p><p>　　“筚路蓝缕，以启山林。”在中国这样经济文化比较落后、人口众多的东方大国建设社会主义，犹如攀登一座人迹未至的高山，没有笔直的大道可走，没有现成的路径可循。我们依靠“人民创造历史”的伟力，依靠“集中力量办大事”的优势，创造了一个又一个可以载入中华民族和人类史册的奇迹。我们凭着“革命加拼命”的精神，凭着“一万年太久、只争朝夕”的勇气，在九百六十多万平方公里的土地上描绘了社会主义新中国的最美图画。我们也曾在摸索探求的路上，遭受“文化大革命”这样严重的挫折，惨痛教训值得永远汲取。</p><p>　　无论平坦还是崎岖，无论阳光还是风雨，党领导人民探索社会主义道路的脚步始终向前。历史已经证明：“我们不但善于破坏一个旧世界，我们还将善于建设一个新世界”！</p><p>　　<strong>（四）</strong></p><p>　　“什么是社会主义？怎样建设社会主义？”这个回荡在中国上空的历史之问，中国共产党人从未停止作答。从深刻揭示社会主义建设和社会主义改造的“十大关系”，到及时作出我国社会主要矛盾已经转变成“先进的社会主义制度同落后的社会生产力之间的矛盾”的重要论断，到鲜明提出正确处理人民内部矛盾，无不是宝贵的探索、艰难的行进。</p><p>　　党的十一届三中全会成为党的历史和新中国历史上具有深远意义的伟大转折。停止使用“以阶级斗争为纲”，把全党工作重点转移到社会主义现代化建设上来，重新确立解放思想、实事求是的思想路线……为了建设社会主义，中国共产党领导人民矢志推进新的伟大革命，开启了改革开放的伟大航程。</p><p>　　贫穷不是社会主义！邓小平指出：“社会主义的本质，是解放生产力，发展生产力，消灭剥削，消除两极分化，最终达到共同富裕。”为了使生产关系适应生产力的发展，家庭联产承包责任制广泛施行，经济特区先行先试，乡镇企业异军突起，科技体制改革深入推进，对外开放格局加快形成，蕴藏在广大人民中的活力创造力充分迸发。</p><p>　　走自己的道路，建设有中国特色的社会主义！我们深刻认识到我国处于并将长期处于社会主义初级阶段，提出党在社会主义初级阶段的基本路线，积极发展公有制为主体、多种所有制经济共同发展的基本经济制度，不断完善社会主义市场经济体制，提出小康社会目标和现代化分步走战略，开创和发展了中国特色社会主义。</p><p>　　坚持改革开放的社会主义方向！坚持改革开放、坚持四项基本原则，这两个基本点紧密联系、不可偏废。我们坚持社会主义物质文明和精神文明“两手抓、两手都要硬”，坚定推进党的建设新的伟大工程，全面推进中国特色社会主义经济、政治、文化、社会、生态文明建设，让人民群众共享改革发展成果，为社会主义理想插上现实的翅膀。</p><p>　　改革开放40多年来，我国经济总量一路超过意大利、法国、英国、德国、日本，稳居世界第二；我国人民生活水平持续提升，已经进入中高收入国家行列；神州大地面貌日新月异，公路成网、铁路密布、西气东输、南水北调、高坝矗立、大桥巍峨，天堑变通途；中国还战胜了历史罕见的洪涝、雨雪冰冻、地震等重大自然灾害和非典等重大疫病，经受住了亚洲金融危机和国际金融危机严峻考验，风雨过后更见气度从容、身姿挺拔。</p><p>　　在把握历史前进的逻辑中前进，在顺应时代发展的潮流中发展。中华大地汹涌澎湃的伟大实践表明：只有社会主义才能发展中国，只有改革开放才能让中国大踏步赶上时代、让人民过上幸福生活。中国特色社会主义道路越走越宽广！</p><p>　　<strong>（五）</strong></p><p>　　雄伟壮丽的社会主义事业，凝结着一代代共产党人的艰苦卓绝和付出奉献，负载着多少先哲英烈的寄托与热望。当历史的接力棒再次传递，习近平总书记的话语铿锵有力：我们这一代共产党人的任务，就是继续把坚持和发展中国特色社会主义这篇大文章写下去！</p><p>　　党的十九大向全党全国和全世界庄严宣告：“经过长期努力，中国特色社会主义进入了新时代，这是我国发展新的历史方位。”</p><p>　　新时代的中国，理想的旗帜鲜艳高扬。面对世界百年未有大变局，习近平总书记带领全党全国人民揽全局、应变局、开新局，党和国家事业取得历史性成就、实现历史性变革，中华民族比历史上任何时候都更接近民族复兴的伟大目标。中国人民对马克思主义、共产主义的信仰更加坚定，对中国特色社会主义的信念更加牢固，对实现中华民族伟大复兴的信心空前高涨。</p><p>　　新时代的中国，发展的动力深厚强劲。从十八届三中全会的全面深化改革，到全面依法治国、全面建成小康社会，再到全面从严治党、以党的自我革命推动社会革命，从坚持和完善中国特色社会主义制度，到立足新发展阶段、贯彻新发展理念、构建新发展格局、推动高质量发展，全面建设社会主义现代化国家，中国特色社会主义的战略布局日益完善，现代化建设的方向目标愈加清晰。</p><p>　　新时代的中国，人民的地位充分彰显。“江山就是人民，人民就是江山”，初心的回响穿越时空。“人民对美好生活的向往，就是我们的奋斗目标”，铿锵的宣示淬铁成钉。为了实现中国人民摆脱贫困的千年夙愿，党领导人民打响了脱贫攻坚战，贫困地区广大干部群众顽强拼搏，第一书记和驻村干部全力投入，东西部协作精准对接，社会各界有钱出钱、有力出力，一户户贫困乡亲感受着社会主义大家庭的温暖，一座座寂静的深山涌动着生机和希望。</p><p>　　新时代的中国，团结的力量一往无前。面对科技的高峰，我们从不退缩。嫦娥飞天、蛟龙入海、天眼观星、北斗组网，就在前不久，“祝融”号火星车经过295天的旅程，成功登陆火星。面对霸凌和打压，我们从未屈服，全党全国敢于斗争、勇于胜利，攒成一股劲、拧成一股绳。百年不遇的新冠肺炎疫情，把我们每个人的命运与国家的、集体的命运紧紧连在一起，14亿中国人心手相连、守家护国，创造了人类抗疫斗争史上的伟大奇迹……社会主义的制度优势得到极大彰显。</p><p>　　天地有正气，浩然塞苍冥。如果说社会主义作为人类的正义事业、崇高的价值追求，赋予了新时代以最鲜明的底色、最厚重的底气；那么，新时代就以它最波澜壮阔的实践，赋予了科学社会主义以新的思想维度、新的历史高度。</p><p>　　2021年4月，习近平总书记专程来到广西全州，瞻仰红军长征湘江战役纪念园，他动情地说，理想信念之火一经点燃就会产生巨大的精神力量，要缅怀革命先烈，赓续共产党人精神血脉，坚定理想信念，砥砺革命意志。</p><p>　　回望八十七年前，长征路上、湘江岸边，无数红军战士为了保存革命的火种鏖战拼杀，用鲜血染红了漫漫征程、滚滚江水。这些大多二十来岁、甚至只有十五六岁的战士们，视死而如归、乐观而顽强，就是因为胸怀着对革命必胜的信念，对社会主义、共产主义美好社会的憧憬。这是一个党永生不灭的基因，是一个民族由衰而兴的密码。</p><p>　　今天，我们可以告慰百年来一切先辈和英魂的是：此时此刻，社会主义的阳光正映照在奋斗者的身影中、孩子们的笑脸上，中国特色社会主义旗帜正引领中华民族伟大复兴呈现出前所未有的光明前景。我们必将创造让世界刮目相看的更大奇迹，必将实现共产党人最崇高的伟大理想！</p><hr><p style="TEXT-ALIGN: center" align="center"><font color="navy"><strong>中国没有辜负社会主义</strong></font></p><p style="TEXT-ALIGN: center" align="center"><font color="navy">宣言</font></p><p>　　英国伦敦，大英博物馆，1516年出版的莫尔的《乌托邦》一书静静躺在展柜里。同时留在这座博物馆图书阅览室地板上的，是一位伟人厚重的足印。正是这位为人类解放事业奋斗终身的马克思，将社会主义从空想变为科学，从而广泛而深刻地影响了世界，也广泛而深刻地改变了中国。</p><p>　　中国北京，人民大会堂，习近平总书记2016年在庆祝中国共产党成立95周年大会上向世界宣示：中国共产党领导中国人民取得的伟大胜利，使具有500年历史的社会主义主张在世界上人口最多的国家成功开辟出具有高度现实性和可行性的正确道路，让科学社会主义在21世纪焕发出新的蓬勃生机。</p><p>　　数百年奔流激荡。曾经苦难深重，如今意气昂扬。在科学真理和崇高理想的指引下，中国大地发生历史巨变，我们无比坚定，社会主义没有辜负中国！在中国共产党领导人民的顽强奋斗中，信仰的光芒熠熠闪烁，伟大的事业青春盎然，我们无比自豪，中国没有辜负社会主义！</p><p>　　<strong>（一）</strong></p><p>　　走进江苏常州的瞿秋白纪念馆，“我总想为大家辟一条光明的路”的誓言格外醒目。</p><p>　　中国共产党这个百折不回的寻路者、大勇无畏的开路人，面对种种考验、重重难关，以愚公移山的坚定、精卫填海的奉献，带领中国人民走出了一条险峻而壮丽、艰辛而宽广的中国道路。中国特色社会主义道路，是党和人民100年奋斗、创造、积累的根本成就，是引领中国进步、增进人民福祉、实现民族复兴的康庄大道。</p><p>　　这是一条在历史洪流中扭转民族命运、书写人间奇迹的奋斗之路。在“山重水复疑无路”的彷徨困顿中，马克思主义给中国带来“柳暗花明”。从此，中国共产党开展了以马克思主义之“矢”射中国之“的”的伟大实践。为了推翻“三座大山”，党领导人民开创了农村包围城市、武装夺取政权的革命道路，建立了新中国。为了改变一穷二白的落后面貌，我们建立起全新的社会主义制度，形成了独立的比较完整的工业体系和国民经济体系，并在总结正反两方面经验的基础上，开启了改革开放的伟大航程，极大解放和发展了生产力。面对民族复兴和世界变局的交织激荡，我们坚定理想信念、保持战略定力，围绕坚持和发展中国特色社会主义，完善总体布局、确立战略布局，引领中华民族迎来了从站起来到富起来、强起来的伟大飞跃。</p><p>　　这是一条把人民放在最高位置，得民心、顺民意、惠民利的初心之路。“人民就是江山，共产党打江山、守江山，守的是人民的心，为的是让人民过上好日子。”一代代共产党人为了人民的利益和福祉，把青春和生命、鲜血和汗水，倾注在这片可爱的土地。“小康路上一个都不能少”！为了让幸福的阳光洒遍神州每一个角落，习近平总书记带领全党全国打响脱贫攻坚战，25.5万个驻村工作队挺进一线，近200万名乡镇干部、数百万村干部倾力奋战，八年时间实现了9899万农村贫困人口全部脱贫，832个贫困县全部摘帽，12.8万个贫困村全部出列。这是党、人民、民族的伟大光荣，是我国社会主义制度优越性的充分体现，标志着中华民族向着共同富裕迈出了一大步。</p><p>　　这是一条在经济文化落后国家探索建设现代化的创造之路。现代化是世界近代以来的历史潮流，也寄托着马克思主义先驱对理想社会的期许。错失了工业革命机遇的中国，从所谓“天朝上国”跌落成任人宰割的“鱼肉”。严复著《原强》《辟韩》，郭嵩焘著《使西纪程》，孙中山著《建国方略》，都见证着对现代化的希望和失望。只有中国共产党登上历史舞台，根除了帝国主义和封建主义的祸根，实现了经济基础和上层建筑的彻底改造，才为中国现代化提供了根本前提。从“四个现代化”目标到“三步走”战略，从建设小康社会到建设现代化强国……党领导人民不但用几十年时间走完了发达国家几百年走过的工业化历程，而且探索开辟了物质文明和精神文明相协调、全体人民共同富裕、人与自然和谐共生、走和平发展道路的中国式现代化，为人类社会发展提供了现代化的全新选择。</p><p>　　这是一条始终保持革命精神、以党的自我革命引领伟大社会革命的锻造之路。列宁指出：“无产阶级在争取政权的斗争中，除了组织，没有别的武器。”把曾经“一盘散沙”的中国凝聚起来，不能不依靠有理想、有纪律的马克思主义政党；为宏伟的目标、艰巨的任务而奋斗，不能不保持党的先进性和纯洁性、创造力和战斗力。古田会议、遵义会议、延安整风、“两个务必”、伟大工程和新的伟大工程……每到重大关头，党都指引着前进的方向、担当起历史的责任，坚持真理、修正错误，带领人民翻过一座又一座山，夺取一个又一个胜利。党的十八大以来，以习近平同志为核心的党中央坚持党对一切工作的领导，以自我革命精神推进全面从严治党，以党的革命性锻造引领新的伟大斗争。“打铁必须自身硬。”新时代共产党人用决心和勇气夯实了事业常青之基，用行动回答了跳出“历史周期率”的世纪之问！</p><p>　　2021年3月，俄罗斯联邦共产党中央委员会主席根纳季·久加诺夫在《真理报》撰文指出：“中国共产党的经验证明，20世纪末社会主义的失利，并不是各种反共产主义者喜欢说的‘乌托邦社会主义计划的失败’……在中共领导下，中国人民有能力应对时代的一切挑战，沿着建设新时代中国特色社会主义的正确道路前进”。</p><p>　　中国用铁一般的事实宣告：历史没有终结也不会终结，社会主义生机蓬勃、前途无限！中国特色社会主义道路不但走得对、走得通，而且必将通往更加光明的未来！</p><p>　　<strong>（二）</strong></p><p>　　马克思主义为人间带回真理的火种，但它并没有结束真理，而是开启了真理之书的扉页。中国，以鲜活厚重的理论创新、思想创造，在科学社会主义这部巨著里写下了属于自己的不朽篇章。</p><p>　　——坚守：中国从未背离科学社会主义基本原则</p><p>　　马克思、恩格斯曾对未来社会主义社会的发展过程、发展方向、一般特征作过科学预测和设想。比如，在生产资料公有制基础上组织生产，满足全体社会成员的需要是社会主义生产的根本目的；对社会生产进行有计划的指导和调节，实行等量劳动领取等量产品的按劳分配原则；合乎自然规律地改造和利用自然……这些构成了科学社会主义基本原则。</p><p>　　百年峥嵘岁月，无论弱小还是强大，无论处于高潮还是遭遇挫折，中国共产党从未动摇对科学社会主义基本原则的坚持。我们坚持党的领导；坚持人民民主专政的国体和人民代表大会制度的政体；坚持劳动光荣、按劳分配的社会主义分配原则；坚持把人的价值放在第一位，不断促进人的全面发展和社会全面进步……这些都在新的历史条件下体现了科学社会主义基本原则，赓续了社会主义的基因血脉。</p><p>　　——发展：中国不断推进马克思主义中国化</p><p>　　“马克思的整个世界观不是教义，而是方法。它提供的不是现成的教条，而是进一步研究的出发点和供这种研究使用的方法。”只有发展马克思主义，才能坚持马克思主义，这就是历史的辩证法。</p><p>　　百年风雨兼程，中国共产党始终高举真理的旗帜、进行理论的创造，坚持解放思想和实事求是相统一、培元固本和守正创新相统一，不断推进马克思主义基本原理同中国实际相结合，产生了毛泽东思想、邓小平理论、“三个代表”重要思想、科学发展观等重大理论创新成果，不断丰富和发展中国化的马克思主义，用与时俱进的科学理论回答了“中国向何处去、社会主义向何处去”的历史课题、时代之问。这些深深扎根于中国大地的思想成果，深刻影响着国家民族的前途命运，极大改变着中国人民的精神面貌，社会主义参天大树在世界东方根深叶茂。</p><p>　　——领航：引领中国、影响世界的当代中国马克思主义、21世纪马克思主义</p><p>　　“哲学把无产阶级作为自己的物质武器。同样，无产阶级也把哲学作为自己的精神武器。”从现实的此岸通向梦想的彼岸，从必然王国通向自由王国，必定依靠揭示客观规律、洞察历史大势、回应时代呼声的科学理论。</p><p>　　百年大江奔流，在中华民族伟大复兴的关键时期，在当今世界动荡变革的历史变局之中，中国共产党人凭着历史的积淀、理想的坚守、开拓的勇毅，紧紧围绕新时代坚持和发展什么样的中国特色社会主义、怎样坚持和发展中国特色社会主义，推进实践的新革命、思想的新长征，结出了饱含中国精神、时代精华的硕果——习近平新时代中国特色社会主义思想。</p><p>　　“中国共产党领导是中国特色社会主义最本质的特征”“坚持以人民为中心的发展思想”“推动全体人民共同富裕取得更为明显的实质性进展”“充分发挥市场在资源配置中的决定性作用，更好发挥政府作用”“坚持创新、协调、绿色、开放、共享的发展理念”“绿水青山就是金山银山”“推动构建人类命运共同体”……这些富有创见的思想、观点和论断，对马克思主义作出了原创性、时代性贡献，开拓了中国特色社会主义的新境界。</p><p>　　新时代中国共产党人赋予马克思主义以鲜明的中国特色、民族特色、时代特色，使人们对共产党执政规律、社会主义建设规律、人类社会发展规律的认识达到了一个新的历史高度，使科学社会主义释放出具有强大说服力、感召力的真理光芒！</p><p>　　<strong>（三）</strong></p><p>　　从莫尔笔下的“乌托邦”，到康帕内拉书中的“太阳城”，从摩莱里苦心写就的《自然法典》，到欧文身体力行的“新和谐公社”，从只存在了72天的巴黎公社，到世界上第一个社会主义国家苏联，人类对社会主义社会和制度形态的探索从未停止。中国在社会主义道路上的制度探索和实践，成就了经济快速发展和社会长期稳定“两大奇迹”。</p><p>　　中国共产党一经成立，就把建立体现社会主义原则的制度作为追求。无论是互助合作运动还是工农兵代表大会制度，无论是“三三制”还是“豆选法”，这些在革命根据地的早期实践，都蕴含着社会主义的制度因素和价值理念，为建立新型国家制度积累了宝贵经验。</p><p>　　新中国成立后，我们及时把成功的实践经验转化为制度成果，使我国国家制度既体现科学社会主义基本原则，又符合中国的特殊国情。社会主义公有制、人民代表大会制度、中国共产党领导的多党合作和政治协商制度、民族区域自治制度等一系列制度逐步建立健全。</p><p>　　习近平总书记深刻指出：“制度问题更带有根本性、全局性、稳定性、长期性。”“只有扎根本国土壤、汲取充沛养分的制度，才最可靠、也最管用。”</p><p>　　进入新时代，我们聚焦坚持和完善中国特色社会主义制度、推进国家治理体系和治理能力现代化，在实践探索的基础上加强顶层设计和战略安排，党和国家制度建设“施工图”恢弘展开。从党的领导、人民代表大会、坚持马克思主义在意识形态领域指导地位、党对人民军队的绝对领导等根本制度，到社会主义基本经济制度、基本政治制度，再到不同领域具有创新性、支撑性的重要制度，中国特色社会主义制度体系层次分明、系统完备，各项制度更加成熟、更加定型，在国家治理中日益显现出巨大的制度效能。</p><p>　　危机是制度的试金石。面对百年不遇的新冠肺炎疫情，党领导人民不惜一切代价阻断疫情传播链条，不惜一切代价抢救生命，仅用3个月左右的时间取得了武汉保卫战、湖北保卫战的决定性成果，以最快速度研制出安全有效的疫苗，在压力巨大的情况下确保了经济发展、社会稳定，并为世界各国抗击疫情提供了有力支持。中国速度、中国奇迹的背后，是人民至上、生命至上的社会主义价值理念，是同舟共济、集中力量办大事的制度优越性，是心系世界人民安危福祉的国际主义精神！</p><p>　　德国政治家埃贡·克伦茨这样评价：中国应对这场全球性危机的方式方法，展示了社会主义的制度优势。资本主义世界的旧药方已经不受欢迎，重心正在发生偏移。阿根廷学者马塞洛·罗德里格斯这样写道：这场危机再次凸显了两种理念之争，一种是资本主义，将所有社会关系都商品化，倡导消费主义、个人主义、剥削和社会达尔文主义；另一种是社会主义，倡导健康、教育、文化等不是市场上可交易的商品，而是人民的权利。</p><p>　　在中国特色社会主义制度下，中国人民享受着前所未有的民主、自由和人权，感受着前所未有的获得感、幸福感、安全感。中国制度和治理体系是党和人民历尽千辛万苦、付出巨大代价取得的伟大成就，矗立起人类制度文明和政治文明发展史上的一座丰碑！</p><p>　　<strong>（四）</strong></p><p>　　“文化自信是一个国家、一个民族发展中更基本、更深沉、更持久的力量。”源自于源远流长的中华优秀传统文化，熔铸于党领导人民创造的革命文化和社会主义先进文化，植根于中国特色社会主义伟大实践……历经百年，中国特色社会主义文化已经融入在中国共产党的精神血脉，时刻形塑着亿万中国人的精神气质。</p><p>　　悠远的文明传承是她的基因。今年3月22日，正在福建考察的习近平总书记来到朱熹园，语重心长地指出：“如果没有中华五千年文明，哪里有什么中国特色？如果不是中国特色，哪有我们今天这么成功的中国特色社会主义道路？”五千年文明的薪火相传、生生不息，赋予了我们党百折不挠的顽强与坚韧；中华文化特有的气质和禀赋，赋予了我们党质朴刚健、艰苦奋斗的宝贵品格；华夏先人对天下大同的追求向往，赋予了我们党心系苍生、天下为公的博大胸襟。凝结着人类思想精华的马克思主义，激活了古老的华夏文明；历史上唯一一个从未中断的伟大文明，又为马克思主义在中国的发展注入丰富的养分和深厚的动力。</p><p>　　威武不屈的革命精神是她的本色。在一百年来党领导人民开天辟地、改天换地、翻天覆地的进程中，不但书写了足以彪炳史册的伟大功绩，而且铸就了可歌可泣、光照千秋的伟大精神。上海兴业路的石库门，嘉兴南湖的红船，井冈山麓的八角楼，长征路上的大渡桥，大庆油田第一口油井，戈壁深处的“两弹一星”科研基地，深圳的莲花山，荆江大堤的抗洪纪念碑，汶川地震后建成的新城，旧貌换新颜的湘西十八洞村……这些早已不只是闻名中外的地理标识，更已成为中华民族不甘落后、拼搏奋斗的精神图腾。每当风雨来袭，每当挑战来临，中国人民都在精神之旅中坚定信心、鼓足勇气，凝聚起众志成城、一往无前的磅礴伟力。</p><p>　　社会主义不但要提高物质生产力、也要提高精神生产力，实现现代化一个重要目标就是建成社会主义文化强国。新时代的中国，党的创新理论深入人心，社会主义核心价值观广为弘扬，文化体制改革扎实推进，文化事业、产业蓬勃发展，文明之花处处绽放。《我和我的祖国》《我和我的家乡》等电影诉说着家国的情怀，《觉醒年代》《跨过鸭绿江》《山海情》等电视剧拨动着人民的心弦，《不忘初心》《天耀中华》《沂蒙山》《大地颂歌》等主题作品传扬着时代的旋律，更有那一支支乌兰牧骑活跃在边疆草原，一支支文艺志愿小分队扎根在工厂田间，一部部作品走出国门、走向世界……这一切，构成了激荡人心的时代协奏、感动世界的中国交响。</p><p>　　这是人民蓬勃向上的中国，这是文化繁盛绚丽的中国。中国特色社会主义文化，成为新时代中国屹立于世界民族之林的精神支柱，成为中华民族为人类贡献的文明瑰宝！</p><p>　　五百年来，人类追求社会主义的路途上，有鲜花芬芳，也有荆棘密布。一百年来，中国人追求社会主义的历程中，闪耀着光荣和梦想，也充满着奋斗和牺牲，伟大的中国共产党和英雄的中国人民从未退却、从未动摇。历史雄辩地证明：中国没有辜负社会主义！</p><p>　　面向未来，中国必将为人类文明进步、为世界社会主义发展作出更大贡献，让这个正义而充满前途的事业迸发出更加夺目的光芒！</p><hr><p>转载自：<a href="http://www.xinhuanet.com/">新华网</a></p><p>原文链接：</p><ul><li><a href="http://www.xinhuanet.com/2021-06/06/c_1127535562.htm">宣言：社会主义没有辜负中国｜新华网</a></li><li><a href="http://www.xinhuanet.com/politics/2021-06/07/c_1127539369.htm">宣言：中国没有辜负社会主义｜新华网</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;宣言&lt;/p&gt;</summary>
    
    
    
    
    <category term="Others" scheme="https://blog.superpung.xyz/tags/Others/"/>
    
  </entry>
  
  <entry>
    <title>iOS 15、iPadOS 15、macOS Monterey 体验</title>
    <link href="https://blog.superpung.xyz/wwdc21/"/>
    <id>https://blog.superpung.xyz/wwdc21/</id>
    <published>2021-06-09T00:10:09.000Z</published>
    <updated>2021-07-15T12:04:05.179Z</updated>
    
    <content type="html"><![CDATA[<p>创新还是挤牙膏，这是一个问题。</p><a id="more"></a><p>去年的此时，在家里迎来了 WWDC20，升级了 iOS 14、iPadOS 14 和 watchOS 7。不得不说，14 的更新幅度确实很大，有很多令人惊喜的功能，当时宣布的 Apple Silicon 也更是充满期待。当时使用的 Hackintosh 仍在 macOS Catalina，并不支持 Big Sur。后来添加了设备 MacBook Air，很喜欢 Big Sur 的新界面，很多地方做了半透明化，像是打通了边界，除了很丑的方形图标。</p><p><img src="https://super-bucket1.oss-cn-beijing.aliyuncs.com/IMG_0298.jpg" alt="IMG_0298"></p><p>今年充满期待地迎接 WWDC21，但说实话远没有去年那么多惊喜。但还是想记录一下使用了一天的体验。官方的新功能就不过多列举了，只记录我自己的想法，会持续更新。</p><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>总体来看，感觉 Apple 对这次升级准备的很少，很多地方显得很突兀、不和谐，而且官网的中文介绍暂时还没有出，macOS Monterey 中新的特性很少。</p><div class="note primary"><h4 id="2021-6-25-更新"><a href="#2021-6-25-更新" class="headerlink" title="2021.6.25 更新"></a>2021.6.25 更新</h4><p>iOS、iPadOS、watchOS 发布了 Beta 2，同时官网在最近也更新了中文版。</p><p>原英文版如下：</p><ul><li><a href="https://www.apple.com/ios/ios-15-preview/">iOS 15</a></li><li><a href="https://www.apple.com/watchos/watchos-preview/">watchOS 8</a></li><li><a href="https://www.apple.com/ipados/ipados-preview/">iPadOS 15</a></li><li><a href="https://www.apple.com/macos/monterey-preview/">macOS Monterey</a></li></ul></div><h1 id="iOS-15"><a href="#iOS-15" class="headerlink" title="iOS 15"></a><a href="https://www.apple.com.cn/ios/ios-15-preview/">iOS 15</a></h1><p>型号名称：iPhone XR</p><h2 id="软件版本：15-0-19A5261w"><a href="#软件版本：15-0-19A5261w" class="headerlink" title="软件版本：15.0 (19A5261w)"></a>软件版本：15.0 (19A5261w)</h2><p><img src="https://super-bucket1.oss-cn-beijing.aliyuncs.com/iOS15beta1.PNG" alt="iOS15beta1"></p><ol><li><p>首先最直观的就是通知中心变小了（根据消息长度改变）、通知横幅变小了。不仅如此，包括设置等 app 在内的很多应用中每一行都变窄了，上下左右的间隔都变大了。</p><p>感觉弧度也变大了，很不适应，感觉更丑了，以前统一的好看。</p><p><img src="https://super-bucket1.oss-cn-beijing.aliyuncs.com/iOS15notice.PNG" alt="iOS15notice"></p></li><li><p>很多地方都开始采用卡片式布局，造成了左右的留白。</p></li><li><p>输入法选中的字符增加了白色底框，很明显。</p></li><li><p>新增「专注」功能，整合了勿扰模式和睡眠模式，而且支持增加新的模式。</p><p> 感觉很鸡肋，设置新模式略显繁琐，勿扰+睡眠已经足够了。</p></li><li><p>备忘录增强，新增快速备忘录、标签等功能，界面微调，准备替代 macOS 上的「便笺」，同时也可以作为笔记 app 使用。</p></li><li><p>升级后多了一个「放大镜」app，对于 iPhone 这放大倍数，无用。</p></li><li><p>iMessage、FaceTime 增强，无用。</p></li><li><p>屏幕小组件的字体变细了。</p></li><li><p>天气 app 增强，个人非常喜欢的点：动画效果增多、描述更详细（更智能）、10 日天气预报增加了温度条、最下方天气情况变大变好看。很遗憾的点：城市间切换的动画没有了，猜测可能是动画变多导致衔接情况变多，还没完全解决，期待后续版本能完善切换动画；空气质量地图虽然没用，但是不准确，图形会重复铺满，以至于很丑很卡顿，不如不要。</p></li><li><p>Safari 升级：iPhone 端的有点反直觉，刷新网页虽然可以下拉实现，但是变麻烦了；为了展示更多网页内容去掉了很多按钮，目前很不适应。</p><p>以前明明也可以全面屏显示，不懂为什么要改变。</p></li><li><p>很多地方的模糊透明的程度有变化。</p></li><li><p>钱包 app 升级，添加交通卡可以选择其他国家或地区。</p><p>十分期待钱包 app 可以自由绑定 NFC，希望 16 可以。</p></li><li><p>App Store 的“正在载入”字体变小，应该是 bug。</p></li><li><p>升级后校园网需要重新认证（mac 地址不会变吧（？）），不知道什么原因。</p></li><li><p>app 请求位置服务时左上角变为蓝色圆圈白色标识。</p></li><li><p>通知摘要功能一样鸡肋。</p></li><li><p>闹钟的时间选择转盘回来了，不错。</p></li><li><p>有时分隔线会和上面文本框的底线重合，等待修复。</p></li><li><p>照片 app 增强，可以显示图片信息，编辑图片时字体更改。</p></li><li><p>测试版发热、耗电略显严重。</p></li></ol><h2 id="软件版本：15-0-19A5281h"><a href="#软件版本：15-0-19A5281h" class="headerlink" title="软件版本：15.0 (19A5281h)"></a>软件版本：15.0 (19A5281h)</h2><p>流畅度提升！</p><p>相比于 Beta 1，更新后熟悉的流畅感回来了。Beta 1 是真的卡卡卡。</p><h2 id="软件版本：15-0-19A5297e"><a href="#软件版本：15-0-19A5297e" class="headerlink" title="软件版本：15.0 (19A5297e)"></a>软件版本：15.0 (19A5297e)</h2><ol><li><p>流畅度提升！</p></li><li><p>「天气」中“周”改成了“星期”，导致显示不全……</p><p> <img src="https://super-bucket1.oss-cn-beijing.aliyuncs.com/IMG_0533.PNG" alt="IMG_0533"></p></li></ol><h1 id="watchOS-8"><a href="#watchOS-8" class="headerlink" title="watchOS 8"></a><a href="https://www.apple.com.cn/watchos/watchos-preview/">watchOS 8</a></h1><p>基本没更新。</p><h1 id="iPadOS-15"><a href="#iPadOS-15" class="headerlink" title="iPadOS 15"></a><a href="https://www.apple.com.cn/ipados/ipados-preview/">iPadOS 15</a></h1><p>型号名称：iPad（第 6 代）</p><h2 id="软件版本：15-0-19A5261w-1"><a href="#软件版本：15-0-19A5261w-1" class="headerlink" title="软件版本：15.0 (19A5261w)"></a>软件版本：15.0 (19A5261w)</h2><ol><li>挤牙膏，小组件可以自由拖动了，但是好像变小了以至于特别丑，尤其是电量小组件。</li><li>很多地方 UI 很奇怪，大小很不合适。</li><li>app 资源库也是挤牙膏，无用。</li><li>分屏功能增强，屏幕上方有三个小圆点，可以直接拖动，会提示是否支持多窗口。</li><li>快速备忘录，支持自定义 Apple Pencil 从左右下角向中间划的功能。</li><li>主屏幕竖屏左右留白变大，特别丑。</li><li>下载新的 app 没有图标。</li><li>Swift playground 可以编译 app，但还不是生产力工具。</li><li>挤牙膏，支持低电量模式。</li></ol><h2 id="软件版本：15-0-19A5281h-1"><a href="#软件版本：15-0-19A5281h-1" class="headerlink" title="软件版本：15.0 (19A5281h)"></a>软件版本：15.0 (19A5281h)</h2><ol><li><p>增加了「健身」app，但没什么用。</p><p> <img src="https://super-bucket1.oss-cn-beijing.aliyuncs.com/iPad%E5%81%A5%E8%BA%AB.PNG" alt="iPad健身"></p><p> <img src="https://super-bucket1.oss-cn-beijing.aliyuncs.com/iPad-Fitness-plus.PNG" alt="iPad-Fitness-plus"></p></li></ol><h1 id="macOS-Monterey"><a href="#macOS-Monterey" class="headerlink" title="macOS Monterey"></a><a href="https://www.apple.com.cn/macos/monterey-preview/">macOS Monterey</a></h1><p><img src="https://super-bucket1.oss-cn-beijing.aliyuncs.com/macos-monterey.png" alt="macos-monterey"></p><p>macOS Big Sur 还没用多久，软件厂商还没全适配，又更新。</p><p>和 Catalina 到 Big Sur 相比，Big Sur 到 Monterey 的更新幅度太小了，以至于图标壁纸都是直接改的 Big Sur。Big Sur 至少还有很多壁纸，但是 Monterey 就一张。</p><p><img src="https://super-bucket1.oss-cn-beijing.aliyuncs.com/monterey-open.png" alt="monterey-open"></p><p>触发角设置时，Big Sur 的壁纸忘记换成 Monterey 的了。</p><ol><li><p>最直观的感受，菜单栏的透明度似乎调整了，变好看了。也有可能是新壁纸更好看。</p></li><li><p>Safari 增强，支持标签页组，这个功能不错，很好用。重新排列的 Safari 可以显示更多内容，很好。部分动画效果更新，很好。</p><p> 但是博客顶部的彩虹效果在新版 Safari 中没有了，等待解决。Safari 中字体有问题。</p></li><li><p>AirPlay 终于有用了。以前就觉得为什么 iPhone 不能用屏幕镜像功能投屏到 mac，现在终于打通了。</p><p> 目前存在 bug：mac 端结束屏幕镜像后鼠标指针消失。</p></li><li><p>Universal Control 很好，但目前还不能用。</p></li><li><p>访达边栏增加「共享」文件夹，显示共享的文件。</p></li><li><p>系统扩展需要重新设置，部分兼容 Big Sur 的软件不能兼容 Monterey，本来不兼容 Big Sur 的软件应该更不能兼容 Monterey。</p></li></ol><h2 id="版本-12-0-Beta版-21A5284e"><a href="#版本-12-0-Beta版-21A5284e" class="headerlink" title="版本 12.0 Beta版(21A5284e)"></a>版本 12.0 Beta版(21A5284e)</h2><p>降级更新：Safari 变回了原来的样子，甚至更难看了：</p><p><img src="https://super-bucket1.oss-cn-beijing.aliyuncs.com/%E6%88%AA%E5%B1%8F2021-07-15%20%E4%B8%8B%E5%8D%8812.15.27.png" alt="截屏2021-07-15 下午12.15.27"></p><p>笑死，直接打脸自己。</p><p>使用了这么长时间，感觉 Monterey 刚更新的 Safari 标签栏确实不太好用，恢复到原来的样子也是情理之中，但是加大标签页栏的宽度只是把原来的方形变成卡片式，只能说是很丑，且没有意义，毫不实用。</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>推荐文章：<a href="https://mp.weixin.qq.com/s/EFqnDiR9HzJKIM84Ocfoxw">WWDC 这 9 个细节关键词，我想展开说说｜果核 Group</a></p><blockquote class="blockquote-center"><p>2021 年的 WWDC 给的功能很少，但它给的想象很多。</p></blockquote>]]></content>
    
    
    <summary type="html">&lt;p&gt;创新还是挤牙膏，这是一个问题。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Others" scheme="https://blog.superpung.xyz/tags/Others/"/>
    
  </entry>
  
  <entry>
    <title>访问控制远程文件</title>
    <link href="https://blog.superpung.xyz/primary-practice-h62/"/>
    <id>https://blog.superpung.xyz/primary-practice-h62/</id>
    <published>2021-05-30T06:54:41.000Z</published>
    <updated>2021-05-30T16:41:03.333Z</updated>
    
    <content type="html"><![CDATA[<p>Primary Practice h62</p><a id="more"></a><div class="note info"><p>构造一个用户通过 socket 访问和控制远程文件的项目</p></div><p>开始理解的时候感觉很困难，但实际上就是一个文件操作的实验，套了一个 socket 的壳。</p><p>和 <a href="https://blog.superpung.xyz/primary-practice-h60">h60</a> 类似，请确保你已经理解 h60。</p><p>先来看一下目录结构：</p><ul><li><code>MyRemoteFile</code> 远程文件类，是远程主机下的文件</li><li><code>MyHost</code> 远程主机，即客户端，向服务器发出操作文件的请求</li><li><code>MyDaemon</code> 监听类，即服务器端，接收客户端请求，直接操作文件</li><li><code>MyDaemonConfigVo</code> 服务器配置</li><li><code>my_user.txt</code> 存放用户名和口令，<code>MyHost</code> 登录需要</li><li><code>Test</code> 测试文件</li></ul><p>实际上，先配置好服务器，创建监听线程，用于响应主机的请求。然后创建远程主机，根据远程主机和路径访问并控制远程文件。</p><h1 id="0x00-MyDaemonConfigVo"><a href="#0x00-MyDaemonConfigVo" class="headerlink" title="0x00 MyDaemonConfigVo"></a>0x00 <code>MyDaemonConfigVo</code></h1><p>服务器配置。</p><p>在这里，服务器就是可以直接操作本地文件的一层。根据 <code>Test</code>，配置项有本地文件目录、端口号和用户信息。其中用户信息可以直接在这里读文件转换为字符串列表（不用 Map）。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String root;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> port;</span><br><span class="line"><span class="keyword">private</span> List&lt;String&gt; users = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br></pre></td></tr></table></figure><p>然后创建对应的 setter 和 getter。</p><p>读取文件的经典方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> List&lt;String&gt; <span class="title">readLines</span><span class="params">(String filePath)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    List&lt;String&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    String line;</span><br><span class="line">    Reader reader = <span class="keyword">new</span> FileReader(filePath);</span><br><span class="line">    LineNumberReader lineReader = <span class="keyword">new</span> LineNumberReader(reader);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">        line = lineReader.readLine();</span><br><span class="line">        <span class="keyword">if</span> (line == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (line.trim().length() == <span class="number">0</span> || line.startsWith(<span class="string">&quot;#&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        result.add(line);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="0x01-MyDaemon"><a href="#0x01-MyDaemon" class="headerlink" title="0x01 MyDaemon"></a>0x01 <code>MyDaemon</code></h1><p>监听类，服务器端，继承 <code>Thread</code>。</p><p>创建时直接将服务器配置传过来，直接保存三个配置项：</p><ul><li>本地路径，直接存字符串</li><li>端口号，直接创建一个 <code>SocketServer</code></li><li>用户信息，直接存字符串列表</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> ServerSocket server;</span><br><span class="line"><span class="keyword">private</span> Socket socket;</span><br><span class="line"><span class="keyword">private</span> BufferedReader in;</span><br><span class="line"><span class="keyword">private</span> PrintWriter out;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> String root;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> List&lt;String&gt; users;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">MyDaemon</span><span class="params">(MyDeamonConfigVo config)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">   server = <span class="keyword">new</span> ServerSocket(config.getPort());</span><br><span class="line">   socket = <span class="keyword">null</span>;</span><br><span class="line">   root = config.getRoot();</span><br><span class="line">   users = config.getUsers();</span><br><span class="line">   in = <span class="keyword">null</span>;</span><br><span class="line">   out = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重写 <code>run</code>，循环从输入流读入并用 <code>readLine</code> 分析（进一步直接操作本地文件）：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        socket = server.accept();</span><br><span class="line">        in = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(socket.getInputStream()));</span><br><span class="line">        out = <span class="keyword">new</span> PrintWriter(socket.getOutputStream());</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            String line = in.readLine();</span><br><span class="line">            readLine(line);</span><br><span class="line">            <span class="keyword">if</span> (<span class="number">1</span> == <span class="number">0</span>) &#123;<span class="comment">// 这里的条件应该是程序结束的条件，没想好怎么写</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        in.close();</span><br><span class="line">        out.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中 <code>readLine</code> 是自己写的，在下文和客户端放在一起叙述。</p><h1 id="0x02-MyHost"><a href="#0x02-MyHost" class="headerlink" title="0x02 MyHost"></a>0x02 <code>MyHost</code></h1><p>远程主机，客户端，需要向输出流写各种操作文件的请求，在服务器那边处理，再从输入流读入服务器输出的内容。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String ip;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> port;</span><br><span class="line"><span class="keyword">private</span> String username;</span><br><span class="line"><span class="keyword">private</span> String password;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">boolean</span> valid;</span><br><span class="line"><span class="keyword">private</span> Socket socket;</span><br><span class="line"><span class="keyword">private</span> BufferedReader in;</span><br><span class="line"><span class="keyword">private</span> PrintWriter out;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">MyHost</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">    socket = <span class="keyword">null</span>;</span><br><span class="line">    in = <span class="keyword">null</span>;</span><br><span class="line">    out = <span class="keyword">null</span>;</span><br><span class="line">    valid = <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>远程主机需要登录，即输入 <code>用户名\t口令</code> 到服务器端判断：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">login</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    socket = <span class="keyword">new</span> Socket(ip, port);</span><br><span class="line">    in = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(socket.getInputStream()));</span><br><span class="line">    out = <span class="keyword">new</span> PrintWriter(socket.getOutputStream());</span><br><span class="line">    writeLine(<span class="string">&quot;login&quot;</span> + username + <span class="string">&quot;\t&quot;</span> + password);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * in.readLine() doesn&#x27;t have &quot;\r\n&quot;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    valid = <span class="string">&quot;success&quot;</span>.equals(in.readLine());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isInvalid</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> !valid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="0x03-MyRemoteFile-gt-MyHost-gt-MyDaemon"><a href="#0x03-MyRemoteFile-gt-MyHost-gt-MyDaemon" class="headerlink" title="0x03 MyRemoteFile -&gt; MyHost -&gt; MyDaemon"></a>0x03 <code>MyRemoteFile</code> -&gt; <code>MyHost</code> -&gt; <code>MyDaemon</code></h1><p><code>MyRemoteFile</code> 是远程文件类，需要一个远程主机再加上路径才能创建一个远程文件。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> MyHost host;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> String path;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">MyRemoteFile</span><span class="params">(MyHost host, String path)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 这里不能直接login，因为不只调用这个类一次，不能每次都login</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">if</span> (host.isInvalid()) &#123;<span class="comment">// 如果主机当前是无效的，意味着主机未登录或者用户名口令不匹配</span></span><br><span class="line">        host.login();</span><br><span class="line">        <span class="keyword">if</span> (host.isInvalid()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IOException(<span class="string">&quot;host login failed!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.host = host;</span><br><span class="line">    <span class="keyword">this</span>.path = path;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>根据 <code>Test</code>，需要实现的功能有：</p><ul><li>登录</li><li>列出子目录和文件</li><li>判断文件类型</li><li>获取远程文件路径（只需返回 <code>path</code>）</li><li>写入文件</li><li>删除文件</li><li>获取文件大小</li><li>检查文件是否存在</li></ul><p>实现的过程，就是远程文件调用远程主机的方法，向监听发送请求，监听对远程主机的请求作出相应，远程主机根据响应来返回值。这里服务器端（监听）和客户端（远程主机）需要遵从一个协议，即：</p><table><thead><tr><th>操作类型</th><th>格式</th></tr></thead><tbody><tr><td>登录</td><td>“login” + username + “\t” + password</td></tr><tr><td>列出子目录和文件</td><td>“getAscDir” + path</td></tr><tr><td>判断文件类型</td><td>“type” + path</td></tr><tr><td>写入文件</td><td>“write” + path + “:” + content</td></tr><tr><td>删除文件</td><td>“delete” + path</td></tr><tr><td>获取文件大小</td><td>“length” + path</td></tr><tr><td>检查文件是否存在</td><td>“exist” + path</td></tr></tbody></table><p>为简化输出，定义方法 <code>writeLine</code>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">writeLine</span><span class="params">(String line)</span> </span>&#123;</span><br><span class="line">    out.write(line + <span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">    out.flush();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>举例：为实现登录操作，客户端需要：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">writeLine(<span class="string">&quot;login&quot;</span> + username + <span class="string">&quot;\t&quot;</span> + password);</span><br></pre></td></tr></table></figure><p>服务器端需要：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (line.startsWith(<span class="string">&quot;login&quot;</span>)) &#123;</span><br><span class="line">    checkLogin(line.substring(<span class="number">5</span>));<span class="comment">// 取&quot;login&quot;后面的内容</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">checkLogin</span><span class="params">(String line)</span> </span>&#123;</span><br><span class="line">  String result = <span class="string">&quot;failed&quot;</span>;</span><br><span class="line">  <span class="keyword">for</span> (String user: users) &#123;</span><br><span class="line">    <span class="keyword">if</span> (line.equals(user)) &#123;</span><br><span class="line">      result = <span class="string">&quot;success&quot;</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  writeLine(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如上文所叙述，服务器端始终用 <code>readLine</code> 方法处理所有请求：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">readLine</span><span class="params">(String line)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (line.startsWith(<span class="string">&quot;login&quot;</span>)) &#123;</span><br><span class="line">        checkLogin(line.substring(<span class="number">5</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (line.startsWith(<span class="string">&quot;getAscDir&quot;</span>)) &#123;</span><br><span class="line">        listFiles(line.substring(<span class="number">9</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (line.startsWith(<span class="string">&quot;type&quot;</span>)) &#123;</span><br><span class="line">        getFileType(line.substring(<span class="number">4</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (line.startsWith(<span class="string">&quot;write&quot;</span>)) &#123;</span><br><span class="line">        writeFile(line.substring(<span class="number">5</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (line.startsWith(<span class="string">&quot;delete&quot;</span>)) &#123;</span><br><span class="line">        delete(line.substring(<span class="number">6</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (line.startsWith(<span class="string">&quot;length&quot;</span>)) &#123;</span><br><span class="line">        getLength(line.substring(<span class="number">6</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (line.startsWith(<span class="string">&quot;exist&quot;</span>)) &#123;</span><br><span class="line">        isExist(line.substring(<span class="number">5</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h2><p>如上文所叙述，创建一个远程文件时需要登录主机，主机登录时依照协议向服务器端写入用户名和口令。</p><p>服务器判断请求为“登录”操作，执行 <code>checkLogin</code>，遍历用户信息字符串列表，存在则写出 <code>&quot;success&quot;</code> 否则 <code>&quot;failed&quot;</code>，客户端根据服务器的响应修改 <code>valid</code> 状态。</p><h2 id="列出子目录和文件"><a href="#列出子目录和文件" class="headerlink" title="列出子目录和文件"></a>列出子目录和文件</h2><p><strong>远程文件类：</strong></p><p>直接调用远程主机的方法。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> MyRemoteFile[] dirByNameAsc() <span class="keyword">throws</span> IOException, InterruptedException &#123;</span><br><span class="line">    <span class="keyword">return</span> host.getDirByNameAsc(path);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>远程主机类：</strong></p><p>发出请求后，服务器先发来文件个数，据此创建远程文件数组；服务器再依次发来文件路径，据此创建每一个远程文件。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> MyRemoteFile[] getDirByNameAsc(String path) <span class="keyword">throws</span> IOException, InterruptedException &#123;</span><br><span class="line">    writeLine(<span class="string">&quot;getAscDir&quot;</span> + path);</span><br><span class="line">    <span class="keyword">int</span> count = Integer.parseInt(in.readLine());</span><br><span class="line">    MyRemoteFile[] result = <span class="keyword">new</span> MyRemoteFile[count];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">        result[i] = <span class="keyword">new</span> MyRemoteFile(<span class="keyword">this</span>, in.readLine());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>监听类：</strong></p><p>根据请求得到文件列表，然后按照名称顺序排序，先输出文件个数再依次输出远程文件路径（远程文件根目录路径+文件名，如果是目录则再加上 <code>/</code>）。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">listFiles</span><span class="params">(String filepath)</span> </span>&#123;</span><br><span class="line">    List&lt;File&gt; files = getFiles(filepath);</span><br><span class="line">    List&lt;File&gt; resortFiles = sortFiles(files);</span><br><span class="line">    writeLine(String.valueOf(resortFiles.size()));</span><br><span class="line">    <span class="keyword">for</span> (File resortFile : resortFiles) &#123;</span><br><span class="line">        String path = filepath + resortFile.getName();</span><br><span class="line">        <span class="keyword">if</span> (!resortFile.isFile()) &#123;</span><br><span class="line">            path += <span class="string">&quot;/&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        writeLine(path);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> List&lt;File&gt; <span class="title">getFiles</span><span class="params">(String filepath)</span> </span>&#123;</span><br><span class="line">    List&lt;File&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    File file = <span class="keyword">new</span> File(root + filepath);</span><br><span class="line">    <span class="keyword">if</span> (!file.isFile()) &#123;</span><br><span class="line">        File[] files = file.listFiles();</span><br><span class="line">        <span class="keyword">if</span> (files != <span class="keyword">null</span>) &#123;</span><br><span class="line">            result.addAll(Arrays.asList(files));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        result.add(file);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> List&lt;File&gt; <span class="title">sortFiles</span><span class="params">(List&lt;File&gt; fileList)</span> </span>&#123;</span><br><span class="line">    List&lt;File&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    List&lt;File&gt; files = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    List&lt;File&gt; dirs = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (File file: fileList) &#123;</span><br><span class="line">        <span class="keyword">if</span> (file.isFile()) &#123;</span><br><span class="line">            files.add(file);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            dirs.add(file);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * it will be changed</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">int</span> dirCount = dirs.size();</span><br><span class="line">    <span class="keyword">int</span> fileCount = files.size();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; dirCount; i++) &#123;</span><br><span class="line">        File dir = dirs.get(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (File file: dirs) &#123;</span><br><span class="line">            <span class="keyword">if</span> (dir.getAbsolutePath().compareTo(file.getAbsolutePath()) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                dir = file;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        result.add(dir);</span><br><span class="line">        dirs.remove(dir);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; fileCount; i++) &#123;</span><br><span class="line">        File file = files.get(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (File file1: files) &#123;</span><br><span class="line">            <span class="keyword">if</span> (file.getAbsolutePath().compareTo(file1.getAbsolutePath()) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                file = file1;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        result.add(file);</span><br><span class="line">        files.remove(file);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="判断文件类型"><a href="#判断文件类型" class="headerlink" title="判断文件类型"></a>判断文件类型</h2><p><strong>远程文件类：</strong></p><p>规定一个文件如果是目录则返回 0，如果是文件则返回 1，否则返回 -1。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isDirectory</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> host.getType(path) == <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isFile</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> host.getType(path) == <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>远程主机类：</strong></p><p>规定一个文件如果是目录则输出 <code>&quot;dir&quot;</code>，如果是文件则输出 <code>&quot;file&quot;</code>。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getType</span><span class="params">(String path)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    writeLine(<span class="string">&quot;type&quot;</span> + path);</span><br><span class="line">    String type = in.readLine();</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&quot;file&quot;</span>.equals(type)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;dir&quot;</span>.equals(type)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>监听类：</strong></p><p>根据路径创建本地文件对象，判断文件类型。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">getFileType</span><span class="params">(String filepath)</span> </span>&#123;</span><br><span class="line">    File file = <span class="keyword">new</span> File(root + filepath);</span><br><span class="line">    <span class="keyword">if</span> (file.isFile()) &#123;</span><br><span class="line">        writeLine(<span class="string">&quot;file&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        writeLine(<span class="string">&quot;dir&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="获取远程文件路径"><a href="#获取远程文件路径" class="headerlink" title="获取远程文件路径"></a>获取远程文件路径</h2><p><strong>远程文件类：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getPathFileName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> path;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="写入文件"><a href="#写入文件" class="headerlink" title="写入文件"></a>写入文件</h2><p><strong>远程文件类：</strong></p><p>直接调用远程主机，传入路径和文件内容。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">writeByBytes</span><span class="params">(<span class="keyword">byte</span>[] bytes)</span> </span>&#123;</span><br><span class="line">    host.writeByBytes(path, bytes);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>远程主机类：</strong></p><p>根据字节数组创建字符串。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">writeByBytes</span><span class="params">(String path, <span class="keyword">byte</span>[] bytes)</span> </span>&#123;</span><br><span class="line">    String content = <span class="keyword">new</span> String(bytes, StandardCharsets.UTF_8);</span><br><span class="line">    writeLine(<span class="string">&quot;write&quot;</span> + path + <span class="string">&quot;:&quot;</span> + content);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>监听类：</strong></p><p>根据格式分离路径和文件内容，文件不存在则新建文件，然后通过文件输出流输出文件内容。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">writeFile</span><span class="params">(String pathAndContent)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    String[] pathContent = pathAndContent.split(<span class="string">&quot;:&quot;</span>);</span><br><span class="line">    String path = pathContent[<span class="number">0</span>];</span><br><span class="line">    String content = pathContent[<span class="number">1</span>];</span><br><span class="line">    File file = <span class="keyword">new</span> File(root + path);</span><br><span class="line">    <span class="keyword">if</span> (!file.exists()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (file.createNewFile()) &#123;</span><br><span class="line">            FileOutputStream outFileStream = <span class="keyword">new</span> FileOutputStream(file);</span><br><span class="line">            outFileStream.write(content.getBytes(StandardCharsets.UTF_8));</span><br><span class="line">            outFileStream.flush();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h2><p><strong>远程文件类：</strong></p><p>直接调用远程主机。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    host.delete(path);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>远程主机类：</strong></p><p>按照格式发送请求。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(String path)</span> </span>&#123;</span><br><span class="line">    writeLine(<span class="string">&quot;delete&quot;</span> + path);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>监听类：</strong></p><p>由于客户端没有读取操作，这里也不能输出。</p><div class="note warning"><p><code>file.delete()</code> 是有返回值的。</p></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(String filepath)</span> </span>&#123;</span><br><span class="line">    File file = <span class="keyword">new</span> File(root + filepath);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * write must be read</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">if</span> (file.delete()) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="获取文件大小"><a href="#获取文件大小" class="headerlink" title="获取文件大小"></a>获取文件大小</h2><p><strong>远程文件类：</strong></p><p>直接调用远程主机。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">length</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> host.getLength(path);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>远程主机类：</strong></p><p>按照格式发送请求，将返回的字符串转换为数字。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getLength</span><span class="params">(String path)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    writeLine(<span class="string">&quot;length&quot;</span> + path);</span><br><span class="line">    String len = in.readLine();</span><br><span class="line">    <span class="keyword">return</span> Integer.parseInt(len);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>监听类：</strong></p><p>根据路径新建文件，若存在则输出文件大小（转换为字符串），否则输出 <code>&quot;0&quot;</code>。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">getLength</span><span class="params">(String filepath)</span> </span>&#123;</span><br><span class="line">    File file = <span class="keyword">new</span> File(root + filepath);</span><br><span class="line">    <span class="keyword">if</span> (file.exists()) &#123;</span><br><span class="line">        writeLine(String.valueOf(file.length()));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        writeLine(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="检查文件是否存在"><a href="#检查文件是否存在" class="headerlink" title="检查文件是否存在"></a>检查文件是否存在</h2><p><strong>远程文件类：</strong></p><p>直接调用远程主机。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">exists</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> host.isExist(path);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>远程主机类：</strong></p><p>按照格式发送请求，对服务器输出的结果进行判断。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isExist</span><span class="params">(String path)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    writeLine(<span class="string">&quot;exist&quot;</span> + path);</span><br><span class="line">    String result = in.readLine();</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;exist&quot;</span>.equals(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>监听类：</strong></p><p>新建文件，判断是否在本地存在。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">isExist</span><span class="params">(String filepath)</span> </span>&#123;</span><br><span class="line">    File file = <span class="keyword">new</span> File(root + filepath);</span><br><span class="line">    <span class="keyword">if</span> (file.exists()) &#123;</span><br><span class="line">        writeLine(<span class="string">&quot;exist&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        writeLine(<span class="string">&quot;not exist&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;Primary Practice h62&lt;/p&gt;</summary>
    
    
    
    
    <category term="Practice" scheme="https://blog.superpung.xyz/tags/Practice/"/>
    
  </entry>
  
  <entry>
    <title>疾病传播模拟</title>
    <link href="https://blog.superpung.xyz/primary-practice-h61/"/>
    <id>https://blog.superpung.xyz/primary-practice-h61/</id>
    <published>2021-05-22T12:35:30.000Z</published>
    <updated>2021-05-30T16:40:00.498Z</updated>
    
    <content type="html"><![CDATA[<p>Primary Practice h61</p><a id="more"></a><div class="note info"><h4 id="Param"><a href="#Param" class="headerlink" title="Param"></a>Param</h4><table><thead><tr><th>方法</th><th>含义</th></tr></thead><tbody><tr><td><code>getImmuEffect()</code> / <code>setImmuEffect(double immuEffect)</code></td><td>疫苗免疫率，可降低传染率</td></tr><tr><td><code>getImmuRate()</code> / <code>setImmuRate(double immuRate)</code></td><td>人群中注射疫苗的人的比例，随机</td></tr><tr><td><code>getCityPopulation()</code> / <code>setCityPopulation(int cityPopulation)</code></td><td>城市人口数</td></tr><tr><td><code>getFamilySize()</code> / <code>setFamilySize(int familySize)</code></td><td>每个家庭人口数（按序）</td></tr><tr><td><code>getCompanySize()</code> / <code>setCompanySize(int companySize)</code></td><td>每个公司人口数（随机）</td></tr><tr><td><code>getSpreadRateFamily()</code> / <code>setSpreadRateFamily(double spreadRateFamily)</code></td><td>家庭传染率（晚上）</td></tr><tr><td><code>getSpreadRateCompany(double spreadRateCompany)</code></td><td>公司传染率（白天）</td></tr><tr><td><code>getLatentPeriod()</code> / <code>setLatentPeriod(int latentPeriod)</code></td><td>潜伏期，此时病人具有传染性，但仍正常上班生活，度过潜伏期后排队治疗</td></tr><tr><td><code>getHealingRateHome()</code> / <code>setHealingRateHome(double healingRateHome)</code></td><td>在家每天自愈概率</td></tr><tr><td><code>getDeathRateHome()</code> / <code>setDeathRateHome(double deathRateHome)</code></td><td>在家每天死亡概率</td></tr><tr><td><code>getHealingRateHospital()</code> / <code>setHealingRateHospital(double healingRateHospital)</code></td><td>在医院每天治愈概率</td></tr><tr><td><code>getDeathRateHospital()</code> / <code>setDeathRateHospital(double deathRateHospital)</code></td><td>在医院每天死亡概率</td></tr><tr><td><code>getHospitalSize()</code> / <code>setHospitalSize(int hospitalSize)</code></td><td>医院床位数</td></tr><tr><td><code>getInitPatients()</code> / <code>setInitPatients(List&lt;Integer&gt; initPatients)</code></td><td>初始病人编号</td></tr></tbody></table><h4 id="SimResult"><a href="#SimResult" class="headerlink" title="SimResult"></a>SimResult</h4><table><thead><tr><th>方法</th><th>含义</th></tr></thead><tbody><tr><td><code>getLatents()</code> / <code>setLatents(int latents)</code></td><td>潜伏期状态人数</td></tr><tr><td><code>getDeaths()</code> / <code>setDeaths(int deaths)</code></td><td>死亡人数</td></tr><tr><td><code>getCured()</code> / <code>setCured(int cured)</code></td><td>自愈+痊愈人数</td></tr><tr><td><code>getPatients()</code> / <code>setPatients(int patients)</code></td><td>患病人数</td></tr></tbody></table></div><p>和 <a href="https://blog.superpung.xyz/primary-practice-h53">h53</a> 问题类似，确保你已经理解 h53。</p><div class="note warning"><h4 id="本文尚未完成，但-h62-已经完成"><a href="#本文尚未完成，但-h62-已经完成" class="headerlink" title="本文尚未完成，但 h62 已经完成"></a>本文尚未完成，但 h62 已经完成</h4></div><p>考虑一个人的状态，有：健康-&gt;潜伏期-&gt;患病-&gt;自愈、治愈/死亡。</p><p>开始的思路是新建一个 <code>Citizen</code> 类，保存一个人的状态和活动。但模拟的时候需要另外定义许多组合，比如家庭、公司、医院等，代码复杂而且算法效率低。运行一次需要 70 多秒，结果还不对。考虑到可能是公司成员设置问题，影响效率、疫苗注射给谁，随机问题不能每次循环十万次、可不可以只保存不健康的人，每天不再循环健康者……改进后仍无果，遂改用老师的思路。</p><p>发现我改进后和老师的思路类似，只不过缺少抽象。为了减少模拟过程中的计算，应将家庭和公司抽象为地点类、医院抽象为医院类。</p><p>由于许多地方用到概率，直接在工具类中定义，提高可读性、简洁度。</p><p>家庭和公司包含成员“市民”，同时市民也包含属性“属于哪个家庭/公司”。</p><p>定义 <code>boolean</code> 变量时，应使用过去分词或形容词，调用它的方法名为 <code>is...</code>。</p><p>潜伏期默认为 -1 更好。</p><p>市民不用写多个“spendOneDay”，写一个分多情况就可以。</p><p>判断一个人是否得病，可以抽象为一个方法，属于一个市民。</p><p>潜伏期在家或在公司都会传染其他人，而且过了潜伏期，如果在家等待床位，也会传染其他人。所以判断家庭和公司内是否有传染源，需要不同的判断方式。</p><p>抽象的好处，住院的病人和等待住院的病人都可以放在 <code>Hospital</code> 类中。</p><p>疫苗注射人数可以不准确，直接对一个人按概率注射。</p><p>果然设置公司用到了 <code>shuffle</code>。</p><p>之前模拟一天的市民感染需要住院、患者治愈或自愈需要出院移动到 <code>Hospital</code> 中。</p><p>以前从个体考虑，很复杂；现在从整体考虑，并加以抽象，更简单。</p><p>传染给公司其他人，不再从传染源考虑，而是从公司考虑，每天查看公司里面是否有传染源，家庭同理；之前每个人判断他的同事，现在公司抽象为一个带有 id 的类。一个人每天如果健康则判断周围环境有无传染源、如果处于潜伏期则潜伏期增长一天并判断是否超过一定天数患病（患病则直接在家等待）、如果在家或在医院等待则判断是否自愈/治愈或死亡。</p><p>上层类调用下层类的实例，可以将自身传参过去，这样下层类就可以访问上层类了。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;Primary Practice h61&lt;/p&gt;</summary>
    
    
    
    
    <category term="Practice" scheme="https://blog.superpung.xyz/tags/Practice/"/>
    
  </entry>
  
  <entry>
    <title>简单的爬虫尝试</title>
    <link href="https://blog.superpung.xyz/tju-drive-crawling/"/>
    <id>https://blog.superpung.xyz/tju-drive-crawling/</id>
    <published>2021-05-22T11:30:07.000Z</published>
    <updated>2021-05-22T12:24:44.388Z</updated>
    
    <content type="html"><![CDATA[<p>算是第一次写的一个小工具吧。</p><a id="more"></a><p>GitHub：<a href="https://github.com/SuperPung/TJU-Drive-Crawling/">https://github.com/SuperPung/TJU-Drive-Crawling/</a></p><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>回想起上一次写 Python 小项目，还是一年之前学习 Python 的时候。当时看书（pcc2e）时敲了一遍书后面几章的项目，尤其是外星人入侵的小游戏，很有趣。</p><p>时隔一年，面对每次打开都需要输入密码的天大云盘，还有好话老师留作业、批作业 follow his heart 的频率，我决定尝试写个小爬虫，能在云盘更新的时候提醒我。</p><p>爬虫，学 Python 之前就听说了，很喜欢这种懒人工具。前段时间开始经常逛 GitHub，也看到过一些小项目。于是我打开了许久未用过的 Pycharm，新建了一个项目。</p><blockquote><p>JetBrains 竟然不支持 edu 邮箱了，👴学生认证马上就到期，只能用学信网资料认证，好几天也不出结果……</p></blockquote><p>写这篇文章时，这个小工具已经写完了。所以有些重构的过程可能会忘记了。</p><h1 id="Crawling"><a href="#Crawling" class="headerlink" title="Crawling"></a>Crawling</h1><p>用 Chrome 抓包，分析到天大云盘的 url 实际上是 <a href="http://pan.tju.edu.cn:9123/v1/link?method=listdir%EF%BC%8C%E5%86%99%E4%B8%80%E4%B8%AA%E8%AF%B7%E6%B1%82%E5%A4%B4">http://pan.tju.edu.cn:9123/v1/link?method=listdir，写一个请求头</a> <code>payload_header</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">payload_header = &#123;</span><br><span class="line">    <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;text/plain;charset=UTF-8&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Referer&quot;</span>: <span class="string">&quot;http://pan.tju.edu.cn/&quot;</span>,</span><br><span class="line">    <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) &quot;</span></span><br><span class="line">                  <span class="string">&quot;Chrome/90.0.4430.212 Safari/537.36 &quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>请求数据需要发出一个 json <code>data</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&quot;link&quot;</span>: link,</span><br><span class="line">    <span class="string">&quot;password&quot;</span>: password,</span><br><span class="line">    <span class="string">&quot;by&quot;</span>: <span class="string">&quot;name&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sort&quot;</span>: <span class="string">&quot;asc&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中 link 就是天大云盘链接的后 32 位，password 就是密码。</p><p>最后通过 POST 请求得到响应：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s = requests.session()</span><br><span class="line">get_root = s.post(url, data=json.dumps(data), headers=payload_header)</span><br><span class="line"><span class="keyword">return</span> get_root.text</span><br></pre></td></tr></table></figure><h1 id="响应分析"><a href="#响应分析" class="headerlink" title="响应分析"></a>响应分析</h1><p>得到响应后，需要对内容分析。尝试用面向对象，但最终选择了函数。通过递归将文件目录输出。</p><p>每次分析后输出文件列表，以 json 格式存放到本地目录，下一次分析则与本地比较，这样就可以知道哪些文件更新了。</p><p>因为使用了递归，所以很多小功能又用函数重构了一下。</p><h1 id="邮件服务"><a href="#邮件服务" class="headerlink" title="邮件服务"></a>邮件服务</h1><p>通过 smtplib 实现。</p><h1 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h1><p>部署到服务器也走了弯路，根本原因是路径的问题。</p><p>最后在脚本上先加一句 cd 解决。</p><h1 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>一共花了一天多一点的时间完成，还是很有趣的。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;算是第一次写的一个小工具吧。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Python" scheme="https://blog.superpung.xyz/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>简单的聊天室</title>
    <link href="https://blog.superpung.xyz/primary-practice-h60/"/>
    <id>https://blog.superpung.xyz/primary-practice-h60/</id>
    <published>2021-05-22T08:51:20.000Z</published>
    <updated>2021-05-22T11:27:27.535Z</updated>
    
    <content type="html"><![CDATA[<p>Primary Practice h60</p><a id="more"></a><div class="note info"><p>在 <code>ChatServer</code>、<code>ChatClient</code> 中增加适当代码，并增加适当的类，完成一个简单的聊天室</p></div><p>和之前 OOP 的一个实验类似，利用 Socket 实现 client 和 server 通信。不同的是，本实验需要多客户端和一服务器通信。</p><h1 id="0x00-ChatServer"><a href="#0x00-ChatServer" class="headerlink" title="0x00 ChatServer"></a>0x00 ChatServer</h1><p>类变量一定包括一个 <code>ServerSocket</code>。</p><p>根据要求，需要从文件中读取到所有的用户名和密码，用 <code>HashMap</code> 保存。</p><p>多 client，为了给每一个 client 回复，需要保存目前已经连接的 client。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> ServerSocket server;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Map&lt;String, String&gt; passwd;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;Socket&gt; clients = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br></pre></td></tr></table></figure><p>构造方法只需要初始化 server 和 passwd：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ChatServer</span> <span class="params">(<span class="keyword">int</span> port, String passwordFilename)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">server = <span class="keyword">new</span> ServerSocket(port);</span><br><span class="line">passwd = readLines(passwordFilename);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>经典：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, String&gt; <span class="title">readLines</span><span class="params">(String filename)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">String line;</span><br><span class="line">Reader reader;</span><br><span class="line">Map&lt;String, String&gt; result = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">reader = <span class="keyword">new</span> FileReader(filename);</span><br><span class="line">LineNumberReader lineReader = <span class="keyword">new</span> LineNumberReader(reader);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">line = lineReader.readLine();</span><br><span class="line"><span class="keyword">if</span> (line == <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (line.trim().length() == <span class="number">0</span> || line.startsWith(<span class="string">&quot;#&quot;</span>)) &#123;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line">String[] lineContent = line.split(<span class="string">&quot;\t&quot;</span>);</span><br><span class="line">result.put(lineContent[<span class="number">0</span>], lineContent[<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>需要开始监听，所以此类一定继承了 <code>Thread</code>，<code>startListen</code> 只需要调用 <code>run</code> 方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startListen</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重写 <code>run</code>，因为要持续监听，与多个 client 相连，所以需要新建 <code>ServerThread</code> 类，在此类中调用它：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">Socket socket = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">socket = server.accept();</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">clients.add(socket);</span><br><span class="line"><span class="keyword">new</span> ServerThread(socket, passwd).start();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="0x01-ServerThread"><a href="#0x01-ServerThread" class="headerlink" title="0x01 ServerThread"></a>0x01 ServerThread</h1><p>构造方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Socket socket;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Map&lt;String, String&gt; passwd;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ServerThread</span><span class="params">(Socket socket, Map&lt;String, String&gt; passwd)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">    <span class="keyword">this</span>.socket = socket;</span><br><span class="line">    <span class="keyword">this</span>.passwd = passwd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重写 <code>run</code>，从输入流读入，向输出流写出。读入的是每一个客户端说的话，写出需要向所有客户端写出。</p><div class="note warning"><p>这里不知道怎么处理比较合适，可能会有更好的写法，欢迎提 pr。</p></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            BufferedReader in = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(socket.getInputStream()));</span><br><span class="line">            PrintWriter out = <span class="keyword">new</span> PrintWriter(socket.getOutputStream());</span><br><span class="line">            String line = in.readLine();</span><br><span class="line">            String passwdStr = line;</span><br><span class="line"><span class="comment">//            System.out.println(&quot;server received username and password: &quot; + passwdStr);</span></span><br><span class="line">            String isLoggedIn = pass(passwdStr);</span><br><span class="line">            out.write(isLoggedIn + <span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">            out.flush();</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;0&quot;</span>.equals(isLoggedIn)) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                line = in.readLine();</span><br><span class="line">                <span class="comment">// \r\n is necessary</span></span><br><span class="line">                <span class="keyword">for</span> (Socket client : ChatServer.clients) &#123;</span><br><span class="line">                    PrintWriter clientOut = <span class="keyword">new</span> PrintWriter(client.getOutputStream());</span><br><span class="line">                    clientOut.write(line + <span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">                    clientOut.flush();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (<span class="number">1</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            in.close();</span><br><span class="line">            out.close();</span><br><span class="line">            socket.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>判断用户名和口令是否有效，为了方便就直接返回字符串了：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">pass</span><span class="params">(String passwdStr)</span> </span>&#123;</span><br><span class="line">    String[] userPasswd = passwdStr.split(<span class="string">&quot;\t&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (userPasswd.length != <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;0&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    String username = userPasswd[<span class="number">0</span>];</span><br><span class="line">    String password = userPasswd[<span class="number">1</span>];</span><br><span class="line">    Set&lt;Map.Entry&lt;String, String&gt;&gt; passwdEntry = passwd.entrySet();</span><br><span class="line">    <span class="keyword">for</span> (Map.Entry&lt;String, String&gt; entry : passwdEntry) &#123;</span><br><span class="line">        <span class="keyword">if</span> (username.equals(entry.getKey())) &#123;</span><br><span class="line">            <span class="keyword">if</span> (password.equals(entry.getValue())) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;1&quot;</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;0&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;0&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="0x03-ChatClient"><a href="#0x03-ChatClient" class="headerlink" title="0x03 ChatClient"></a>0x03 ChatClient</h1><p>每个客户端有是否登录两种状态：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">boolean</span> isLoggedIn;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> PrintWriter out;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> BufferedReader in;</span><br></pre></td></tr></table></figure><p>构造方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ChatClient</span> <span class="params">(String ip, <span class="keyword">int</span> port)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">Socket client = <span class="keyword">new</span> Socket(ip, port);</span><br><span class="line"><span class="comment">// 获得输出流</span></span><br><span class="line">out = <span class="keyword">new</span> java.io.PrintWriter(client.getOutputStream());</span><br><span class="line"><span class="comment">// 获得输入流</span></span><br><span class="line">in = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(client.getInputStream()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>登录操作，向服务器写入用户名和密码（用 <code>\t</code> 分隔），服务器会判断并写出到这里的输入流。</p><p>是不是有更好的写法？欢迎提 pr。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">login</span><span class="params">(String userName,String password)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">String passwd = userName + <span class="string">&quot;\t&quot;</span> + password;</span><br><span class="line">String get;</span><br><span class="line"><span class="comment">// \r\n is necessary</span></span><br><span class="line">out.write(passwd + <span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">out.flush();</span><br><span class="line">get = in.readLine();</span><br><span class="line">isLoggedIn = <span class="string">&quot;1&quot;</span>.equals(get);</span><br><span class="line"><span class="keyword">return</span> isLoggedIn;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>登出：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logout</span><span class="params">()</span> </span>&#123;</span><br><span class="line">isLoggedIn = <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>发言：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">speak</span><span class="params">(String str)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"> <span class="keyword">if</span> (!isLoggedIn) &#123;</span><br><span class="line"> <span class="keyword">throw</span> <span class="keyword">new</span> IOException(<span class="string">&quot;Haven&#x27;t logged in!&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> out.write(str + <span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line"> out.flush();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>读取发言：</p><p>这里是否需要创建消息队列？欢迎评论、issue、提 pr 交流。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">read</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (!isLoggedIn) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> in.readLine();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>有很多地方写的不是很好，但最后也过了，可能需要特定的测试用例？</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;Primary Practice h60&lt;/p&gt;</summary>
    
    
    
    
    <category term="Practice" scheme="https://blog.superpung.xyz/tags/Practice/"/>
    
  </entry>
  
  <entry>
    <title>化学反应分析</title>
    <link href="https://blog.superpung.xyz/primary-practice-h59/"/>
    <id>https://blog.superpung.xyz/primary-practice-h59/</id>
    <published>2021-05-06T13:12:11.000Z</published>
    <updated>2021-05-13T13:45:52.490Z</updated>
    
    <content type="html"><![CDATA[<p>Primary Practice h59</p><a id="more"></a><div class="note info"><p>根据 reactionFile 给出的一系列反应， 判断一个体系中根据 init 物质，判断出最后可能都存在什么物质</p><p>本文件中存放了若干的化学反应方程式（总数量不会超过 1000 个）</p><p>本文件中存放了一系列的化学反应 #表示注释</p><p>化学反应以 = 分为了左侧和右侧；不同化合物之间至少有一个空格</p><p>A + B = C + D 意味着体系中如果有了 A B 就可以生成 C D，同样如果有 C D 也可以生成 A B</p><p>所有反应，反应物前系数均为 1</p></div><ol><li>从文件中读取反应方程式，用<del>哈希映射</del> <code>Reaction</code> 类存储：反应物存储为一个集合、生成物存储为一个集合，二者一一对应（可逆反应，反应物和生成物可互换）；</li><li>遍历方程式映射，如果 result 含有所有的反应物<strong>且不含有所有的生成物（不含、含一部分）</strong>，则将生成物加入 result；依据生成物加反应物同理；</li><li>若遍历一次，result 未添加新的物质，说明反应达到平衡。</li></ol><div class="note success"><h4 id="2021-5-13-更新"><a href="#2021-5-13-更新" class="headerlink" title="2021.5.13 更新"></a>2021.5.13 更新</h4><p>文件读取方程式不能用哈希映射存储，因为可能存在反应物相同而生成物不同的情况。</p><p>所以新建了 <code>Reaction</code> 类。</p></div><p>修改后：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.huawei.classroom.student.h59;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> super</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Reaction</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; reactant;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; product;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Reaction</span><span class="params">(Set&lt;String&gt; reactant, Set&lt;String&gt; product)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.reactant = reactant;</span><br><span class="line">        <span class="keyword">this</span>.product = product;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Set&lt;String&gt; <span class="title">getReactant</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> reactant;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Set&lt;String&gt; <span class="title">getProduct</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> product;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.huawei.classroom.student.h59;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> super</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReactionTools</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据reactionFile给出的一系列反应， 判断一个体系中根据init物质，判断出最后可能都存在什么物质</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> reactionFile 体系中初始反应物</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> initComponents 体系中初始反应物</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 最后体系中存在的全部物质</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Set&lt;String&gt; <span class="title">findAllComponents</span><span class="params">(String reactionFile,Set&lt;String&gt; initComponents)</span></span>&#123;</span><br><span class="line">List&lt;Reaction&gt; reactions = readLines(reactionFile);</span><br><span class="line">Set&lt;String&gt; result = <span class="keyword">new</span> HashSet&lt;&gt;(initComponents);</span><br><span class="line"><span class="keyword">int</span> newAddCount = initComponents.size();</span><br><span class="line"><span class="keyword">while</span> (newAddCount != <span class="number">0</span>) &#123;</span><br><span class="line">newAddCount = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (Reaction reaction : reactions) &#123;</span><br><span class="line"><span class="comment">// contain or not contain, that is a question</span></span><br><span class="line"><span class="keyword">if</span> (result.containsAll(reaction.getReactant()) &amp;&amp; !result.containsAll(reaction.getProduct())) &#123;</span><br><span class="line">result.addAll(reaction.getProduct());</span><br><span class="line">newAddCount++;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (result.containsAll(reaction.getProduct()) &amp;&amp; !result.containsAll(reaction.getReactant())) &#123;</span><br><span class="line">result.addAll(reaction.getReactant());</span><br><span class="line">newAddCount++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Reaction&gt; <span class="title">readLines</span><span class="params">(String filename)</span> </span>&#123;</span><br><span class="line">String line;</span><br><span class="line">Reader reader = <span class="keyword">null</span>;</span><br><span class="line">List&lt;Reaction&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">reader = <span class="keyword">new</span> FileReader(filename);</span><br><span class="line">&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (reader == <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line">LineNumberReader lineReader = <span class="keyword">new</span> LineNumberReader(reader);</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">line = lineReader.readLine();</span><br><span class="line"><span class="keyword">if</span> (line == <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (line.trim().length() == <span class="number">0</span> || line.startsWith(<span class="string">&quot;#&quot;</span>)) &#123;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line">String[] reaction = line.split(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">String left = reaction[<span class="number">0</span>];</span><br><span class="line">String right = reaction[<span class="number">1</span>];</span><br><span class="line">String[] lefts = left.split(<span class="string">&quot;\\ \\+\\ &quot;</span>);<span class="comment">// regular</span></span><br><span class="line">Set&lt;String&gt; leftSet = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (String s : lefts) &#123;</span><br><span class="line">leftSet.add(s.trim());</span><br><span class="line">&#125;</span><br><span class="line">String[] rights = right.split(<span class="string">&quot;\\ \\+\\ &quot;</span>);</span><br><span class="line">Set&lt;String&gt; rightSet = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (String s : rights) &#123;</span><br><span class="line">rightSet.add(s.trim());</span><br><span class="line">&#125;</span><br><span class="line">result.add(<span class="keyword">new</span> Reaction(leftSet, rightSet));</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><details class="note no-icon"><summary><p>修改前</p></summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.huawei.classroom.student.h59;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> super</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReactionTools</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据reactionFile给出的一系列反应， 判断一个体系中根据init物质，判断出最后可能都存在什么物质</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> reactionFile 体系中初始反应物</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> initComponents 体系中初始反应物</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 最后体系中存在的全部物质</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Set&lt;String&gt; <span class="title">findAllComponents</span><span class="params">(String reactionFile,Set&lt;String&gt; initComponents)</span></span>&#123;</span><br><span class="line">Map&lt;Set&lt;String&gt;, Set&lt;String&gt;&gt; reactions = readLines(reactionFile);</span><br><span class="line">Set&lt;String&gt; result = <span class="keyword">new</span> HashSet&lt;&gt;(initComponents);</span><br><span class="line">Set&lt;Map.Entry&lt;Set&lt;String&gt;, Set&lt;String&gt;&gt;&gt; reactionsEntrySet = reactions.entrySet();</span><br><span class="line"><span class="keyword">int</span> newAddCount = initComponents.size();</span><br><span class="line"><span class="keyword">while</span> (newAddCount != <span class="number">0</span>) &#123;</span><br><span class="line">newAddCount = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (Map.Entry&lt;Set&lt;String&gt;, Set&lt;String&gt;&gt; entry : reactionsEntrySet) &#123;</span><br><span class="line"><span class="comment">// contain or not contain, that is a question</span></span><br><span class="line"><span class="keyword">if</span> (result.containsAll(entry.getKey()) &amp;&amp; !result.containsAll(entry.getValue())) &#123;</span><br><span class="line">result.addAll(entry.getValue());</span><br><span class="line">newAddCount++;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (result.containsAll(entry.getValue()) &amp;&amp; !result.containsAll(entry.getKey())) &#123;</span><br><span class="line">result.addAll(entry.getKey());</span><br><span class="line">newAddCount++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Map&lt;Set&lt;String&gt;, Set&lt;String&gt;&gt; readLines(String filename) &#123;</span><br><span class="line">String line;</span><br><span class="line">Reader reader = <span class="keyword">null</span>;</span><br><span class="line">Map&lt;Set&lt;String&gt;, Set&lt;String&gt;&gt; result = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">reader = <span class="keyword">new</span> FileReader(filename);</span><br><span class="line">&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (reader == <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line">LineNumberReader lineReader = <span class="keyword">new</span> LineNumberReader(reader);</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">line = lineReader.readLine();</span><br><span class="line"><span class="keyword">if</span> (line == <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (line.trim().length() == <span class="number">0</span> || line.startsWith(<span class="string">&quot;#&quot;</span>)) &#123;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line">String[] reaction = line.split(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">String left = reaction[<span class="number">0</span>];</span><br><span class="line">String right = reaction[<span class="number">1</span>];</span><br><span class="line">String[] lefts = left.split(<span class="string">&quot;\\ \\+\\ &quot;</span>);<span class="comment">// regular</span></span><br><span class="line">Set&lt;String&gt; leftSet = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (String s : lefts) &#123;</span><br><span class="line">leftSet.add(s.trim());</span><br><span class="line">&#125;</span><br><span class="line">String[] rights = right.split(<span class="string">&quot;\\ \\+\\ &quot;</span>);</span><br><span class="line">Set&lt;String&gt; rightSet = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (String s : rights) &#123;</span><br><span class="line">rightSet.add(s.trim());</span><br><span class="line">&#125;</span><br><span class="line">result.put(leftSet, rightSet);</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><a href="https://github.com/SuperPung/Primary-Practice-Homeworks/tree/master/src/com/huawei/classroom/student/h59">Source code</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;Primary Practice h59&lt;/p&gt;</summary>
    
    
    
    
    <category term="Practice" scheme="https://blog.superpung.xyz/tags/Practice/"/>
    
  </entry>
  
  <entry>
    <title>投票统计</title>
    <link href="https://blog.superpung.xyz/primary-practice-h58/"/>
    <id>https://blog.superpung.xyz/primary-practice-h58/</id>
    <published>2021-05-06T13:12:08.000Z</published>
    <updated>2021-05-12T07:05:41.640Z</updated>
    
    <content type="html"><![CDATA[<p>Primary Practice h58</p><a id="more"></a><div class="note info"><p>fileName 是一个投票的明细记录，里面逐行存放了</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">投票的时间（yyyy-MM-dd HH:mm:ss 格式） + <span class="string">\t</span> + 投票的微信ID + <span class="string">\t</span> + 候选人</span><br></pre></td></tr></table></figure><p>存放按时间递增（但是可能出现同一秒出现若干条记录的情况） </p><p>现在需要完成投票统计的过程，具体要求如下：</p><ul><li>1 个微信 ID 1 分钟内 最多投 1 票 多余的票数无效</li><li>1 个微信 ID 10 分钟内 最多只能投 5 票 多余的票无效</li><li>其中微信 ID 不固定，候选人姓名不固定</li><li>测试的时候要求 10 万行记录处理时间不超过 3 秒</li></ul></div><p>很有趣的一道题，虽然最后的结果始终有 3%～5% 的误差（截止到 2021.5.6 晚 9:58，还是没有找到误差出现的地方）。</p><p>和之前分析的文件类似，每一行文本有相同的格式，此处我抽象为一个 Record 类。</p><p>假设已经有了 Record 类，根据要求，需要对每位投票者的投票操作进行分析，去除掉那些不符合要求的操作记录。所以投票者也应抽象为一 Voter 类。</p><h1 id="0x00-Record"><a href="#0x00-Record" class="headerlink" title="0x00 Record"></a>0x00 Record</h1><p>此 Record 类对应文件的一行，所以应有时间、投票者和候选人属性。但整体来看，每条记录可能有效也可能无效，所以再添加一有效性属性：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Date date;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> String voterId;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> String candidate;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">boolean</span> valid;</span><br></pre></td></tr></table></figure><p>构造方法只需要传入参数，初始化各个属性。难点在于时间 <code>Date</code> 类型的处理，需要引入 <code>DateFormat</code> 和 <code>SimpleDateFormat</code> 类。此时暂且将每一条记录都设为有效：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Record</span><span class="params">(String date, String voterId, String candidate)</span> </span>&#123;</span><br><span class="line">    DateFormat fmt = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.date = fmt.parse(date);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.voterId = voterId;</span><br><span class="line">    <span class="keyword">this</span>.candidate = candidate;</span><br><span class="line">    valid = <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>定义各种 getter 和 setter：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Date <span class="title">getDate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> date;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getVoterId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> voterId;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getCandidate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> candidate;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> valid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setInvalid</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    valid = <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最后，由于后续分析记录有效性的主要依据是时间，所以记录之间的先后顺序很重要。故 Record 类需要实现 <code>Comparable</code> 接口，重写 <code>compareTo</code> 方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Record</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Record</span>&gt; </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Record o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> date.compareTo(o.date);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="0x01-Voter"><a href="#0x01-Voter" class="headerlink" title="0x01 Voter"></a>0x01 Voter</h1><p>最主要的部分，本次实践的核心。</p><h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><p>作为一名投票者，区别身份的就是 ID，权利是一系列的投票记录：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> String id;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> List&lt;Record&gt; records = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX_RECORDS_IN_TEN_MINUTES = <span class="number">5</span>; <span class="comment">// 十分钟内最多投票的次数</span></span><br></pre></td></tr></table></figure><div class="note warning"><p>可能会联想到，Record 类的属性中，关于投票者为什么只存一个 String 而不是 Voter？</p><p>因为 Voter 会包含 Record，避免套娃，减少冗余，而且 Record 只是一个中间类，目的是根据 Record 的 voterId 将其添加到对应 voter 的 records 中，所以只需要一个 String。</p></div><p>构造方法只传入 ID：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Voter</span><span class="params">(String id)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.id = id;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>文件中同一位投票者的投票记录不一定是连续的，所以投票记录需要逐条添加：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addRecord</span><span class="params">(Record record)</span> </span>&#123;</span><br><span class="line">    records.add(record);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>另外，从整体来看，投票者有若干个，可构成集合，为便于后续获取投票者的集合，此处需实现可序列化接口，重写哈希码和相等方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Voter</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">...</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id.hashCode();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!(o <span class="keyword">instanceof</span> Voter)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ((Voter) o).id.equals(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="去除无效记录"><a href="#去除无效记录" class="headerlink" title="去除无效记录"></a>去除无效记录</h2><p>核心中的核心。</p><p>再次回顾一下，具体要求如下：</p><ul><li>1 个微信 ID 1 分钟内 最多投 1 票 多余的票数无效</li><li>1 个微信 ID 10 分钟内 最多只能投 5 票 多余的票无效</li></ul><p>为了判断，记录存储必须是按照时间递增的。1 分钟内最多 1 票，这个条件容易判断，只需要记录当前记录的时间，计算出 1 分钟之后的时间，再和下一条记录比对。但是要保证 10 分钟内最多 5 票，就有些困难。一方面，不能先只判断 1 分钟，因为两个条件互相影响，必须按时间顺序逐条判断；另一方面，判断 10 分钟不能按 0～10、10～20 判断，因为要保证任意 10 分钟内都最多只有 5 条，所以我利用 buffer 一次读入 5 条记录，这 5 条记录一定是满足 10 分钟条件的，在此基础上进行 1 分钟条件判断。</p><div class="note primary"><h4 id="2021-5-7-更新"><a href="#2021-5-7-更新" class="headerlink" title="2021.5.7 更新"></a>2021.5.7 更新</h4><p>之前读入 5 条记录后只判断了 1 分钟条件，忘记判断 10 分钟条件。即这 5 条记录中可能从中间某一条记录开始，时间已经在第一条的 10 分钟以外，此时这条记录之前的记录一定为有效，且 buffer 应后移相应记录条数。</p><p>相应地，移动后应重新判断 1 分钟条件和 10 分钟条件，故定义了 <code>isBufFinish</code> 控制循环。</p><p>且，5 条记录内，1 分钟条件应优先于 10 分钟条件，所以加了 <code>break</code>。</p><p>修改前：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">1007</span> ms cost!</span><br><span class="line"><span class="attribute">wang</span> 的误差为：<span class="number">5</span>.<span class="number">09</span>%</span><br><span class="line"><span class="attribute">zhao</span> 的误差为：<span class="number">4</span>.<span class="number">23</span>%</span><br><span class="line"><span class="attribute">zhang</span> 的误差为：<span class="number">3</span>.<span class="number">36</span>%</span><br><span class="line"><span class="attribute">li</span> 的误差为：<span class="number">4</span>.<span class="number">29</span>%</span><br></pre></td></tr></table></figure><p>修改后：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">901</span> ms cost!</span><br><span class="line"><span class="attribute">wang</span> 的误差为：<span class="number">4</span>.<span class="number">65</span>%</span><br><span class="line"><span class="attribute">zhao</span> 的误差为：<span class="number">2</span>.<span class="number">7</span>%</span><br><span class="line"><span class="attribute">zhang</span> 的误差为：<span class="number">4</span>.<span class="number">57</span>%</span><br><span class="line"><span class="attribute">li</span> 的误差为：<span class="number">4</span>.<span class="number">05</span>%</span><br></pre></td></tr></table></figure></div><p>buffer 内部判断完成，需将 buffer 整体后移。若 buffer 之后的记录还在 10 分钟内，一定为无效。直到找到下一条 10 分钟之外的记录。每次 buffer 只移动一条记录，加 <code>break</code>。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeInvalidRecords</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 按时间排序</span></span><br><span class="line">    records.sort(Record::compareTo);</span><br><span class="line">    <span class="comment">// 容量为5的buffer</span></span><br><span class="line">    List&lt;Record&gt; buffer = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    <span class="keyword">int</span> next = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; Math.min(MAX_RECORDS_IN_TEN_MINUTES, records.size()); i++) &#123;</span><br><span class="line">        buffer.add(records.get(next++));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 每条记录判断</span></span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        <span class="keyword">int</span> i, j;</span><br><span class="line">        Date curDate = buffer.get(<span class="number">0</span>).getDate();</span><br><span class="line">        Date oneMinLater = <span class="keyword">new</span> Date(curDate.getTime() + <span class="number">60000</span>);</span><br><span class="line">        Date tenMinLater = <span class="keyword">new</span> Date(curDate.getTime() + <span class="number">600000</span>);</span><br><span class="line">        <span class="keyword">boolean</span> isBufFinish = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">while</span> (!isBufFinish) &#123;</span><br><span class="line">            <span class="comment">// 去除不满足1分钟条件的记录</span></span><br><span class="line">            <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; buffer.size(); i++) &#123;</span><br><span class="line">                Date nextDate = buffer.get(i).getDate();</span><br><span class="line">                <span class="keyword">if</span> (nextDate.compareTo(oneMinLater) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                    buffer.get(i).setInvalid();</span><br><span class="line">                    buffer.remove(i--);</span><br><span class="line">                    <span class="keyword">if</span> (next &lt; records.size()) &#123;</span><br><span class="line">                        buffer.add(records.get(next++));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    oneMinLater = <span class="keyword">new</span> Date(nextDate.getTime() + <span class="number">60000</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// （5.7新增）判断buffer内是否超过10分钟，不设无效，只移动</span></span><br><span class="line">            <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; buffer.size(); i++) &#123;</span><br><span class="line">                Date nextDate = buffer.get(i).getDate();</span><br><span class="line">                <span class="keyword">if</span> (nextDate.compareTo(tenMinLater) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                    tenMinLater = <span class="keyword">new</span> Date(nextDate.getTime() + <span class="number">600000</span>);</span><br><span class="line">                    <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">                        buffer.remove(j);</span><br><span class="line">                        buffer.add(records.get(next++));</span><br><span class="line">                    &#125;</span><br><span class="line">                    isBufFinish = <span class="keyword">false</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    isBufFinish = <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 判断buffer后的下一条记录是否超过10分钟</span></span><br><span class="line">        <span class="keyword">while</span> (next &lt; records.size()) &#123;</span><br><span class="line">            Record nextRecord = records.get(next);</span><br><span class="line">            <span class="keyword">if</span> (nextRecord.getDate().compareTo(tenMinLater) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                nextRecord.setInvalid();</span><br><span class="line">                next++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                buffer.remove(<span class="number">0</span>);</span><br><span class="line">                buffer.add(nextRecord);</span><br><span class="line">                next++;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">while</span> (next &lt; records.size());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>至此，最核心的算法已完成。但 5.7 更新后仍有 4.7% 以下的误差，一定是有边界情况未考虑，待更新。</p><h2 id="获取有效记录"><a href="#获取有效记录" class="headerlink" title="获取有效记录"></a>获取有效记录</h2><p>用哈希映射存储，遍历有效记录。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Integer&gt; <span class="title">getCandidates</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Map&lt;String, Integer&gt; candidates = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (Record record : records) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!record.isValid()) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        String candidate = record.getCandidate();</span><br><span class="line">        <span class="keyword">int</span> count = candidates.getOrDefault(candidate, <span class="number">0</span>);</span><br><span class="line">        candidates.put(candidate, count + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> candidates;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="0x02-VoteRecord"><a href="#0x02-VoteRecord" class="headerlink" title="0x02 VoteRecord"></a>0x02 VoteRecord</h1><p>顶层类，按行读取文件，每行存一 Record 实例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Record&gt; <span class="title">readLines</span><span class="params">(String filename)</span> </span>&#123;</span><br><span class="line">String line = <span class="string">&quot;&quot;</span>;</span><br><span class="line">Reader reader = <span class="keyword">null</span>;</span><br><span class="line">List&lt;Record&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">reader = <span class="keyword">new</span> FileReader(filename);</span><br><span class="line">&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (reader == <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line">LineNumberReader lineReader = <span class="keyword">new</span> LineNumberReader(reader);</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">line = lineReader.readLine();</span><br><span class="line"><span class="keyword">if</span> (line == <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">String[] recordItems = line.split(<span class="string">&quot;\t&quot;</span>);</span><br><span class="line">String date = recordItems[<span class="number">0</span>];</span><br><span class="line">String voterId = recordItems[<span class="number">1</span>];</span><br><span class="line">String candidate = recordItems[<span class="number">2</span>];</span><br><span class="line">Record record = <span class="keyword">new</span> Record(date, voterId, candidate);</span><br><span class="line">result.add(record);</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>主体 <code>calcRecording</code>，将读取到的 Record 列表存储，存所有 voter 的 id，存所有 voter，存所有 voterId 和 voter 的对应关系，存所有的候选人和其所得票数：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String,Integer&gt; <span class="title">calcRecording</span><span class="params">(String fileName)</span></span>&#123;</span><br><span class="line">List&lt;Record&gt; records = readLines(fileName);</span><br><span class="line">Set&lt;String&gt; voterIds = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">Set&lt;Voter&gt; voters = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">Map&lt;String, Voter&gt; voterMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">Map&lt;String, Integer&gt; candidates = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (Record record : records) &#123;</span><br><span class="line">voterIds.add(record.getVoterId());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (String voterId : voterIds) &#123;</span><br><span class="line">Voter voter = <span class="keyword">new</span> Voter(voterId);</span><br><span class="line">voters.add(voter);</span><br><span class="line">voterMap.put(voterId, voter);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (Record record : records) &#123;</span><br><span class="line">Voter voter = voterMap.get(record.getVoterId());</span><br><span class="line">voter.addRecord(record);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (Voter voter : voters) &#123;</span><br><span class="line">voter.removeInvalidRecords();</span><br><span class="line">Map&lt;String, Integer&gt; oneCandidates = voter.getCandidates();</span><br><span class="line"><span class="comment">//System.out.println(voter.getRecords().size());</span></span><br><span class="line">Set&lt;Map.Entry&lt;String, Integer&gt;&gt; oneCandidatesNameCount = oneCandidates.entrySet();</span><br><span class="line"><span class="keyword">for</span> (Map.Entry&lt;String, Integer&gt; entry : oneCandidatesNameCount) &#123;</span><br><span class="line">String candidate = entry.getKey();</span><br><span class="line"><span class="keyword">int</span> count = entry.getValue();</span><br><span class="line"><span class="keyword">if</span> (candidates.containsKey(candidate)) &#123;</span><br><span class="line">count += candidates.get(candidate);</span><br><span class="line">&#125;</span><br><span class="line">candidates.put(candidate, count);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> candidates;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note warning"><h4 id="误差待消除"><a href="#误差待消除" class="headerlink" title="误差待消除"></a>误差待消除</h4></div><p><a href="https://github.com/SuperPung/Primary-Practice-Homeworks/tree/master/src/com/huawei/classroom/student/h58">Source code</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;Primary Practice h58&lt;/p&gt;</summary>
    
    
    
    
    <category term="Practice" scheme="https://blog.superpung.xyz/tags/Practice/"/>
    
  </entry>
  
  <entry>
    <title>目录下文件大小统计</title>
    <link href="https://blog.superpung.xyz/primary-practice-h57/"/>
    <id>https://blog.superpung.xyz/primary-practice-h57/</id>
    <published>2021-05-06T13:12:05.000Z</published>
    <updated>2021-05-12T07:05:33.180Z</updated>
    
    <content type="html"><![CDATA[<p>Primary Practice h57</p><a id="more"></a><div class="note info"><p>统计一个目录下所有文件大小的加和</p></div><p>递归。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.huawei.classroom.student.h57;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> super</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileTool</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">long</span> sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 统计一个目录下所有文件大小的加和</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">recursiveCalcFileSize</span><span class="params">(String homeDir)</span> </span>&#123;</span><br><span class="line">File home = <span class="keyword">new</span> File(homeDir);</span><br><span class="line">calcFiles(home);</span><br><span class="line"><span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">calcFiles</span><span class="params">(File dir)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (!dir.exists() || !dir.isDirectory()) &#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">String[] files = dir.list();</span><br><span class="line"><span class="keyword">if</span> (files == <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (String s : files) &#123;</span><br><span class="line">File file = <span class="keyword">new</span> File(dir, s);</span><br><span class="line"><span class="keyword">if</span> (file.isFile()) &#123;</span><br><span class="line">sum += file.length();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">calcFiles(file);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://github.com/SuperPung/Primary-Practice-Homeworks/tree/master/src/com/huawei/classroom/student/h57">Source code</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;Primary Practice h57&lt;/p&gt;</summary>
    
    
    
    
    <category term="Practice" scheme="https://blog.superpung.xyz/tags/Practice/"/>
    
  </entry>
  
  <entry>
    <title>文本文件内容替换</title>
    <link href="https://blog.superpung.xyz/primary-practice-h56/"/>
    <id>https://blog.superpung.xyz/primary-practice-h56/</id>
    <published>2021-05-06T13:12:02.000Z</published>
    <updated>2021-05-06T13:38:41.384Z</updated>
    
    <content type="html"><![CDATA[<p>Primary Practice h56</p><a id="more"></a><div class="note info"><p>将 homeDir 目录下（包括子目录）所有的文本文件（扩展名为 .txt，扩展名不是 .txt 的文件不要动，扩展名区分大小写) 文件中，orgStr 替换为 targetStr</p><p>所有文本文件均为 UTF-8 编码</p></div><p>与简单的字符串 replace 不同，此处涉及文件的写入操作。</p><p>为方便替换，在 FileTool 中定义属性：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String EXTNAME = <span class="string">&quot;txt&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> String orgStr = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> String targetStr = <span class="string">&quot;&quot;</span>;</span><br></pre></td></tr></table></figure><p>根据题目要求，需要递归遍历文件，所以在 <code>replaceTxtFileContent</code> 方法中给属性赋值后再调用 <code>readFiles</code> 方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">replaceTxtFileContent</span><span class="params">(String homeDir,String orgStr,String targetStr)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.orgStr = orgStr;</span><br><span class="line"><span class="keyword">this</span>.targetStr = targetStr;</span><br><span class="line">File home = <span class="keyword">new</span> File(homeDir);</span><br><span class="line">readFiles(home);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在经典的递归读文件方法中调用替换文件内容方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">readFiles</span><span class="params">(File dir)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (!dir.exists() || !dir.isDirectory()) &#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">String[] files = dir.list();</span><br><span class="line"><span class="keyword">if</span> (files == <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (String s : files) &#123;</span><br><span class="line">File file = <span class="keyword">new</span> File(dir, s);</span><br><span class="line"><span class="keyword">if</span> (file.isFile()) &#123;</span><br><span class="line">String filename = file.getName();</span><br><span class="line"><span class="keyword">if</span> (isTxtFile(filename)) &#123;</span><br><span class="line">replaceFileContent(file);</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">readFiles(file);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在替换文件内容方法中，用最简单理解的方式，先读出文件内容到字符串中，再替换其中的字符串，再将替换后的字符串写入文件：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">replaceFileContent</span><span class="params">(File file)</span> </span>&#123;</span><br><span class="line">String content = readFromTxt(file);</span><br><span class="line"><span class="keyword">if</span> (content.length() == <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">String newContent = content.replace(orgStr, targetStr);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">FileWriter fw = <span class="keyword">new</span> FileWriter(file.getAbsoluteFile());</span><br><span class="line">BufferedWriter bw = <span class="keyword">new</span> BufferedWriter(fw);</span><br><span class="line">bw.write(newContent);</span><br><span class="line">bw.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>替换之前需要判断是否为文本文件，直接取扩展名再无大小判断即可：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isTxtFile</span><span class="params">(String filename)</span> </span>&#123;</span><br><span class="line">String[] filenames = filename.split(<span class="string">&quot;\\.&quot;</span>);</span><br><span class="line">String ext = filenames[filenames.length - <span class="number">1</span>];</span><br><span class="line"><span class="keyword">return</span> EXTNAME.equalsIgnoreCase(ext);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>经典读取文本文件的方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">readFromTxt</span><span class="params">(File file)</span> </span>&#123;</span><br><span class="line">Reader reader = <span class="keyword">null</span>;</span><br><span class="line">StringBuffer buf = <span class="keyword">new</span> StringBuffer();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">char</span>[] chars = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">1024</span>];</span><br><span class="line"><span class="comment">// InputStream in=new FileInputStream(filename);</span></span><br><span class="line">reader = <span class="keyword">new</span> InputStreamReader(<span class="keyword">new</span> FileInputStream(file), StandardCharsets.UTF_8);</span><br><span class="line"><span class="keyword">int</span> readed = reader.read(chars);</span><br><span class="line"><span class="keyword">while</span> (readed != -<span class="number">1</span>) &#123;</span><br><span class="line">buf.append(chars, <span class="number">0</span>, readed);</span><br><span class="line">readed = reader.read(chars);</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">close(reader);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> buf.toString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(Closeable inout)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (inout != <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">inout.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;Primary Practice h56&lt;/p&gt;</summary>
    
    
    
    
    <category term="Practice" scheme="https://blog.superpung.xyz/tags/Practice/"/>
    
  </entry>
  
  <entry>
    <title>李白杜甫诗词分析</title>
    <link href="https://blog.superpung.xyz/primary-practice-h55/"/>
    <id>https://blog.superpung.xyz/primary-practice-h55/</id>
    <published>2021-05-01T12:35:37.000Z</published>
    <updated>2021-05-01T16:07:03.867Z</updated>
    
    <content type="html"><![CDATA[<p>Primary Practice h55</p><a id="more"></a><div class="note info"><p>用计算机来证明：为什么说李白是浪漫主义诗人、杜甫是现实主义诗人？</p><p>分析不同诗人使用一些汉字时候的特点。</p><ol><li>分析：不同诗人使用一个汉字的时候，将这些汉字组成什么词汇使用在诗句里面；</li><li>按这些词汇出现的频率高低排序；</li><li>只要是两个汉字连起来就视为一个词。</li></ol></div><p><a href="https://blog.superpung.xyz/oop-h13/">上一次</a> 分析比较了红楼梦的前八十回和后四十回，这一次分析比较李白和杜甫的诗词。</p><p>主体代码几乎和 h13 相同。</p><p>借用了 h13 的 <code>getTopNWords</code> 方法，属性有：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String[] verses = <span class="keyword">new</span> String[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">private</span> Set&lt;String&gt; charSet = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br></pre></td></tr></table></figure><p>改写 <code>getTopNWords</code> 方法：</p><ul><li>返回值改为 <code>List&lt;Map.Entry&lt;String, Integer&gt;&gt;</code> 便于得到频率值；</li><li>对切割后子串的判断条件改为 <code>!charSet.contains(str.substring(0, 1)) &amp;&amp; !charSet.contains(str.substring(1))</code>，即两个字都不在要判断的字集里时跳过。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Map.Entry&lt;String, Integer&gt;&gt; getTopNWords(<span class="keyword">int</span> n)&#123;</span><br><span class="line"><span class="keyword">int</span> i, j;</span><br><span class="line">Map&lt;String, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">List&lt;Map.Entry&lt;String, Integer&gt;&gt; mapList;</span><br><span class="line">List&lt;Map.Entry&lt;String, Integer&gt;&gt; ans = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; <span class="keyword">this</span>.verses.length; i++)&#123;</span><br><span class="line">String content = <span class="keyword">this</span>.verses[i];</span><br><span class="line"><span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; content.length() - <span class="number">1</span>; j++) &#123;</span><br><span class="line">String str = content.substring(j, j + <span class="number">2</span>);</span><br><span class="line"><span class="keyword">if</span> (!charSet.contains(str.substring(<span class="number">0</span>, <span class="number">1</span>)) &amp;&amp; !charSet.contains(str.substring(<span class="number">1</span>))) &#123;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> count;</span><br><span class="line">count = map.getOrDefault(str, <span class="number">0</span>);</span><br><span class="line">map.put(str, count + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mapList = <span class="keyword">new</span> ArrayList&lt;&gt;(map.entrySet());</span><br><span class="line">mapList.sort((o1, o2) -&gt; o2.getValue().compareTo(o1.getValue()));</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">ans.add(mapList.get(i));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最终 <code>analysis</code> 方法只需处理文件读入和判断的字并打印结果：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">analysis</span><span class="params">(String pathFilename, String chars)</span> </span>&#123;</span><br><span class="line">String content = readFromTxt(pathFilename);</span><br><span class="line">List&lt;Map.Entry&lt;String, Integer&gt;&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">charSet = <span class="keyword">new</span> HashSet&lt;&gt;(Arrays.asList(chars.split(<span class="string">&quot;;&quot;</span>)));</span><br><span class="line">verses = content.split(<span class="string">&quot;[，。]&quot;</span>);</span><br><span class="line">result = getTopNWords(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">for</span> (Map.Entry&lt;String, Integer&gt; res : result) &#123;</span><br><span class="line">System.out.println(res.getKey() + <span class="string">&quot;\t&quot;</span> + res.getValue());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最后分析不同词汇（不完整）。</p><h4 id="“春-夏-秋-冬-暑-寒-风-雨-雪-霜-露”"><a href="#“春-夏-秋-冬-暑-寒-风-雨-雪-霜-露”" class="headerlink" title="“春;夏;秋;冬;暑;寒;风;雨;雪;霜;露”"></a>“春;夏;秋;冬;暑;寒;风;雨;雪;霜;露”</h4><table><thead><tr><th>李白</th><th>杜甫</th></tr></thead><tbody><tr><td>春风    72<br/>风吹    51<br/>秋月    40<br/>清风    28<br/>秋风    25<br/>东风    24<br/>白雪    21<br/>长风    21<br/>秋浦    21<br/>秋霜    20</td><td>风尘    48<br/>秋风    30<br/>风吹    28<br/>天寒    27<br/>清秋    25<br/>春色    20<br/>春风    19<br/>风雨    17<br/>高秋    16<br/>云雨    16</td></tr></tbody></table><p>这些是几个和季节有关的词汇，李白和杜甫在高频词上有所不同，李白喜欢“春风”、“风吹”、“秋月”，杜甫喜欢“风尘”、“秋风”。</p><h4 id="“醉-酒-饮-杯”"><a href="#“醉-酒-饮-杯”" class="headerlink" title="“醉;酒;饮;杯”"></a>“醉;酒;饮;杯”</h4><table><thead><tr><th>李白</th><th>杜甫</th></tr></thead><tbody><tr><td>美酒    27<br/>一杯    21<br/>杯酒    14<br/>对酒    13<br/>三杯    11<br/>斗酒    11<br/>杯中    8<br/>饮酒    8<br/>置酒    8<br/>衔杯    7</td><td>酒酣    10<br/>杯酒    7<br/>醉眠    6<br/>嗜酒    6<br/>痛饮    6<br/>酒杯    5<br/>对酒    5<br/>杯中    5<br/>酒肉    5<br/>春酒    5</td></tr></tbody></table><p>李白喝酒比杜甫多，而且酒量也比杜甫大。</p><h4 id="“东-西-南-北”"><a href="#“东-西-南-北”" class="headerlink" title="“东;西;南;北”"></a>“东;西;南;北”</h4><table><thead><tr><th>李白</th><th>杜甫</th></tr></thead><tbody><tr><td>东风    24<br/>东海    23<br/>东山    20<br/>东流    19<br/>南山    19<br/>西来    16<br/>东南    12<br/>北斗    12<br/>西施    10<br/>北海    10</td><td>西南    15<br/>北风    14<br/>北斗    14<br/>东西    13<br/>东流    12<br/>南国    12<br/>西江    11<br/>南征    11<br/>西戎    9<br/>瀼西    9</td></tr></tbody></table><p>李白更喜欢东风，杜甫总是想到北风。</p><h4 id="“云-日-月-山-河”"><a href="#“云-日-月-山-河”" class="headerlink" title="“云;日;月;山;河”"></a>“云;日;月;山;河”</h4><table><thead><tr><th>李白</th><th>杜甫</th></tr></thead><tbody><tr><td>白日    62<br/>明月    59<br/>青云    46<br/>浮云    44<br/>秋月    40<br/>白云    34<br/>落日    32<br/>今日    28<br/>五月    26<br/>黄河    26</td><td>今日    33<br/>落日    29<br/>白日    27<br/>浮云    23<br/>江山    22<br/>巫山    20<br/>日月    20<br/>终日    18<br/>他日    18<br/>日暮    18</td></tr></tbody></table><p>除去“白日”、“今日”等与自然景色无关的词汇，李白更喜欢“明月”，而杜甫更喜欢“落日”。</p><h4 id="“水-天-玉-心”"><a href="#“水-天-玉-心”" class="headerlink" title="“水;天;玉;心”"></a>“水;天;玉;心”</h4><table><thead><tr><th>李白</th><th>杜甫</th></tr></thead><tbody><tr><td>青天    54<br/>天地    53<br/>流水    34<br/>天上    31<br/>天子    28<br/>白玉    27<br/>绿水    26<br/>天下    22<br/>海水    17<br/>汉水    16</td><td>天下    35<br/>天地    32<br/>天子    29<br/>天寒    27<br/>江水    16<br/>寸心    13<br/>白水    13<br/>秋水    12<br/>天意    12<br/>水中    11</td></tr></tbody></table><p>可见杜甫更加挂念天下苍生，忧国忧民。</p><h4 id="“歌-愁”"><a href="#“歌-愁”" class="headerlink" title="“歌;愁”"></a>“歌;愁”</h4><table><thead><tr><th>李白</th><th>杜甫</th></tr></thead><tbody><tr><td>歌舞    9<br/>愁不    9<br/>人愁    9<br/>吴歌    9<br/>行歌    8<br/>歌白    8<br/>长歌    8<br/>愁杀    7<br/>歌钟    7<br/>棹歌    7</td><td>愁思    13<br/>穷愁    11<br/>客愁    10<br/>长歌    9<br/>高歌    8<br/>歌兮    7<br/>悲歌    6<br/>兮歌    6<br/>狂歌    5<br/>愁绝    5</td></tr></tbody></table><p>可以看出李白更加浪漫，喜欢歌舞；而杜甫则悲怆多愁，连“歌”都是“悲歌”。</p><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>由于不同的出身、经历，李白和杜甫两人的诗歌创作风格有所不同。李白和杜甫彼此深情凝望，又相互辉映。一个浪漫豪放，一个忧国忧民；一个富有激情，一个臻于深刻。李白的创作尚意韵，是神来之笔；杜甫的创作尚法度，是典范圭臬。李白和杜甫代表两种精神人格、两种风格境界。二者并立，成为两座高峰、两座丰碑，他们风格不同，却伟大相通。</p><blockquote class="blockquote-center"><p>李富于才，杜深于学。富于才者豪于情，深于学者笃于性。</p><p>诗原本性情。以性情为诗，所以凌驾一代，妙绝千古。</p></blockquote>]]></content>
    
    
    <summary type="html">&lt;p&gt;Primary Practice h55&lt;/p&gt;</summary>
    
    
    
    
    <category term="Practice" scheme="https://blog.superpung.xyz/tags/Practice/"/>
    
  </entry>
  
  <entry>
    <title>判断复杂口令</title>
    <link href="https://blog.superpung.xyz/primary-practice-h54/"/>
    <id>https://blog.superpung.xyz/primary-practice-h54/</id>
    <published>2021-05-01T12:35:34.000Z</published>
    <updated>2021-05-01T15:06:44.957Z</updated>
    
    <content type="html"><![CDATA[<p>Primary Practice h54</p><a id="more"></a><div class="note info"><p>判断一个口令是否是一个复杂度合法的口令。</p><p>复杂度合法的口令有如下要求：</p><ol><li>长度 &gt;=8</li><li>最少包含一个数字</li><li>最少包含一个小写英文字母</li><li>最少包含一个大写英文字母</li><li>最少包含一个特殊字符 特殊字符定义为   ~!@#$%^&amp;*()_+</li></ol></div><p>很简单，只需要对每一位进行判断：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Set&lt;Character&gt; CHAR_SET = <span class="keyword">new</span> HashSet&lt;&gt;(Arrays.asList</span><br><span class="line">(<span class="string">&#x27;~&#x27;</span>, <span class="string">&#x27;!&#x27;</span>, <span class="string">&#x27;@&#x27;</span>, <span class="string">&#x27;#&#x27;</span>, <span class="string">&#x27;$&#x27;</span>, <span class="string">&#x27;%&#x27;</span>, <span class="string">&#x27;^&#x27;</span>, <span class="string">&#x27;&amp;&#x27;</span>, <span class="string">&#x27;*&#x27;</span>, <span class="string">&#x27;(&#x27;</span>, <span class="string">&#x27;)&#x27;</span>, <span class="string">&#x27;_&#x27;</span>, <span class="string">&#x27;+&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValidPassword</span><span class="params">(String password)</span></span>&#123;</span><br><span class="line"><span class="keyword">boolean</span> isLengthNotLess8, isContainDigital, isContainLowerLetter, isContainUpperLetter, isContainSpecialChar;</span><br><span class="line"><span class="keyword">int</span> digitalCount = <span class="number">0</span>, lowerLetterCount = <span class="number">0</span>, upperLetterCount = <span class="number">0</span>, specialCharCount = <span class="number">0</span>;</span><br><span class="line">isLengthNotLess8 = password.length() &gt;= <span class="number">8</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; password.length(); i++) &#123;</span><br><span class="line"><span class="keyword">char</span> cha = password.charAt(i);</span><br><span class="line"><span class="keyword">if</span> (cha &lt;= <span class="string">&#x27;9&#x27;</span> &amp;&amp; cha &gt;= <span class="string">&#x27;0&#x27;</span>) &#123;</span><br><span class="line">digitalCount++;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (cha &lt;= <span class="string">&#x27;z&#x27;</span> &amp;&amp; cha &gt;= <span class="string">&#x27;a&#x27;</span>) &#123;</span><br><span class="line">lowerLetterCount++;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (cha &lt;= <span class="string">&#x27;Z&#x27;</span> &amp;&amp; cha &gt;= <span class="string">&#x27;A&#x27;</span>) &#123;</span><br><span class="line">upperLetterCount++;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (CHAR_SET.contains(cha)) &#123;</span><br><span class="line">specialCharCount++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">isContainDigital = digitalCount &gt;= <span class="number">1</span>;</span><br><span class="line">isContainLowerLetter = lowerLetterCount &gt;= <span class="number">1</span>;</span><br><span class="line">isContainUpperLetter = upperLetterCount &gt;= <span class="number">1</span>;</span><br><span class="line">isContainSpecialChar = specialCharCount &gt;= <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> isLengthNotLess8 &amp;&amp; isContainDigital &amp;&amp; isContainLowerLetter &amp;&amp; isContainUpperLetter &amp;&amp; isContainSpecialChar;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;Primary Practice h54&lt;/p&gt;</summary>
    
    
    
    
    <category term="Practice" scheme="https://blog.superpung.xyz/tags/Practice/"/>
    
  </entry>
  
  <entry>
    <title>兔子繁殖问题</title>
    <link href="https://blog.superpung.xyz/primary-practice-h53/"/>
    <id>https://blog.superpung.xyz/primary-practice-h53/</id>
    <published>2021-05-01T12:35:30.000Z</published>
    <updated>2021-05-01T13:51:51.224Z</updated>
    
    <content type="html"><![CDATA[<p>Primary Practice h53</p><a id="more"></a><div class="note info"><p>1 对兔子出生以后经过 180 天可以生出一窝（2 对）兔子，以后每隔 90 天繁殖一次生出一窝（2 对）兔子</p><p>每对兔子的寿命是 700 天 </p><p>@param startCount 第 0 天 开始的时候初始的兔子对数</p><p>@param days 经过的天数</p><p>@return 目前系统中存活的兔子的对数</p></div><p>一道很有趣的题，不是简单的递归问题。无需找规律，只需模拟出真实的兔子繁殖。</p><p>可以发现，需要抽象出兔子类（个体）、兔子窝类（集体），才能完整模拟兔子繁殖。</p><h1 id="0x00-Rabbit"><a href="#0x00-Rabbit" class="headerlink" title="0x00 Rabbit"></a>0x00 Rabbit</h1><p>根据要求，兔子的属性有它的“年龄”（以天计）、“寿命”（以天计，700 天）、生存状况（生存天数达到寿命则死亡）：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> dayAge;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">boolean</span> dead;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> lifeDayTime = <span class="number">700</span>;</span><br></pre></td></tr></table></figure><p>兔子刚出生时，“年龄”为 0：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Rabbit</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    dayAge = <span class="number">0</span>;</span><br><span class="line">    dead = <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>获取兔子的“年龄”：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getDayAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> dayAge;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>兔子经过一天的成长（只有此时会发生兔子死亡，所以需要判断）：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">growOneDay</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (isDead()) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    dayAge++;</span><br><span class="line">    <span class="keyword">if</span> (dayAge &gt; lifeDayTime) &#123;</span><br><span class="line">        dead = <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>获取兔子的生存状况：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isDead</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> dead;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="0x01-RabbitNest"><a href="#0x01-RabbitNest" class="headerlink" title="0x01 RabbitNest"></a>0x01 RabbitNest</h1><p>上面的 Rabbit 类代表兔子个体，此 RabbitNest 类代表兔子集体：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> List&lt;Rabbit&gt; rabbits = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br></pre></td></tr></table></figure><p>兔子窝开始的时候，需要几只初始兔子：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">RabbitNest</span><span class="params">(<span class="keyword">int</span> startCount)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; startCount; i++) &#123;</span><br><span class="line">        Rabbit rabbit = <span class="keyword">new</span> Rabbit();</span><br><span class="line">        rabbits.add(rabbit);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>经过一天，兔子们长大了：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rabbitsGrow</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (Rabbit rabbit : rabbits) &#123;</span><br><span class="line">        rabbit.growOneDay();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>经过一天，有的兔子达到的寿命，离开了：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rabbitsDead</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    rabbits.removeIf(Rabbit::isDead);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>经过一天，有的兔子生小兔子了：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rabbitsBearLittleRabbits</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;Rabbit&gt; rabbitsBornOneDay = <span class="keyword">new</span> ArrayList&lt;&gt;();<span class="comment">// 这一天生的兔子</span></span><br><span class="line">    <span class="keyword">for</span> (Rabbit rabbit : rabbits) &#123;<span class="comment">// 这一天存活的兔子，不包括新生的兔子</span></span><br><span class="line">        <span class="keyword">int</span> dayAge = rabbit.getDayAge();<span class="comment">// 某兔子的年龄</span></span><br><span class="line">        <span class="keyword">boolean</span> isRabbitCanBear = dayAge == <span class="number">180</span> || (dayAge &gt; <span class="number">180</span> &amp;&amp; (dayAge - <span class="number">180</span>) % <span class="number">90</span> == <span class="number">0</span>);<span class="comment">// 可以生小兔子的条件</span></span><br><span class="line">        <span class="keyword">if</span> (isRabbitCanBear &amp;&amp; !rabbit.isDead()) &#123;<span class="comment">// 可生且未死亡</span></span><br><span class="line">            Rabbit rabbit1 = <span class="keyword">new</span> Rabbit();<span class="comment">// 生了一对</span></span><br><span class="line">            Rabbit rabbit2 = <span class="keyword">new</span> Rabbit();<span class="comment">// 又生了一对</span></span><br><span class="line">            rabbitsBornOneDay.add(rabbit1);</span><br><span class="line">            rabbitsBornOneDay.add(rabbit2);<span class="comment">// 加入到这一天新生的兔子中</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    rabbits.addAll(rabbitsBornOneDay);<span class="comment">// 这一天新生的兔子加入到兔子集体</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>经过一天，兔子们主要经历以上三个阶段：成长、死亡、新生：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">oneDayPass</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    rabbitsGrow();</span><br><span class="line">    rabbitsDead();</span><br><span class="line">    rabbitsBearLittleRabbits();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>获取兔子窝中兔子数量：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getLivingRabbits</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> rabbits.size();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="0x02-RabbitCount"><a href="#0x02-RabbitCount" class="headerlink" title="0x02 RabbitCount"></a>0x02 RabbitCount</h1><p>创建了兔子和兔子窝，想要知道兔子的数量也就简单了：只需创建一个兔子窝，经历相应的天数，再获取其中兔子的数量：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getLivingRabbit</span><span class="params">(<span class="keyword">int</span> startCount,<span class="keyword">int</span> days)</span> </span>&#123;</span><br><span class="line">RabbitNest rabbitNest = <span class="keyword">new</span> RabbitNest(startCount);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; days; i++) &#123;</span><br><span class="line">rabbitNest.oneDayPass();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> rabbitNest.getLivingRabbits();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;Primary Practice h53&lt;/p&gt;</summary>
    
    
    
    
    <category term="Practice" scheme="https://blog.superpung.xyz/tags/Practice/"/>
    
  </entry>
  
  <entry>
    <title>质因数分解</title>
    <link href="https://blog.superpung.xyz/primary-practice-h52/"/>
    <id>https://blog.superpung.xyz/primary-practice-h52/</id>
    <published>2021-05-01T12:35:28.000Z</published>
    <updated>2021-05-01T13:16:39.069Z</updated>
    
    <content type="html"><![CDATA[<p>Primary Practice h52</p><a id="more"></a><div class="note info"><p>将 num 进行质因数分解，将分解到的质因数放到 Set 里面返回</p></div><p>如果每次对 num 分解都从最小的质数开始，那么分解的结果一定都是质数。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Set&lt;Integer&gt; <span class="title">decompose</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">Set&lt;Integer&gt; result = <span class="keyword">new</span> HashSet&lt;&gt;();<span class="comment">// 分解的结果</span></span><br><span class="line"><span class="keyword">if</span> (num &lt; <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">null</span>;<span class="comment">// 负数不分解</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (num == <span class="number">1</span>) &#123;</span><br><span class="line">result.add(<span class="number">1</span>);<span class="comment">// 1就是1</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">int</span> i = <span class="number">2</span>;<span class="comment">// 先从最小质数开始</span></span><br><span class="line"><span class="keyword">while</span> (i &lt;= num) &#123;</span><br><span class="line"><span class="keyword">if</span> (num % i == <span class="number">0</span>) &#123;</span><br><span class="line">result.add(i);<span class="comment">// 整除，i是num因数</span></span><br><span class="line">num = num / i;<span class="comment">// 取剩余部分，下次继续分解</span></span><br><span class="line">i = <span class="number">2</span>;<span class="comment">// 下次分解一定要从头开始</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">i++;<span class="comment">// 不整除，只自增1即可，不必直接到下一个质数（都不能被2整除，怎么可能被4整除）</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;Primary Practice h52&lt;/p&gt;</summary>
    
    
    
    
    <category term="Practice" scheme="https://blog.superpung.xyz/tags/Practice/"/>
    
  </entry>
  
  <entry>
    <title>微信红包的模拟算法</title>
    <link href="https://blog.superpung.xyz/primary-practice-h51/"/>
    <id>https://blog.superpung.xyz/primary-practice-h51/</id>
    <published>2021-05-01T12:35:22.000Z</published>
    <updated>2021-05-13T13:40:51.797Z</updated>
    
    <content type="html"><![CDATA[<p>Primary Practice h51</p><a id="more"></a><div class="note info"><p>完成分红包金额的程序，调用方式如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HongBao home = <span class="keyword">new</span> HongBao();</span><br></pre></td></tr></table></figure><p>返回每个人应得的的钱数，分红包规则参考微信的随机红包</p><p>此题目结果不要求精确匹配</p></div><p>模拟一个微信随机红包的算法，查阅了一些资料，得知微信随机红包可能遵循以下规律（可靠性未知，且过于简单化）：</p><ol><li>单个红包最低金额为 0.01 元；</li><li>单个红包最高金额为剩余钱数对剩余份数的平均值的二倍。</li><li>抢到红包的钱数总和等于发出的钱数。</li></ol><p>根据此，可以写出抢到红包的钱数：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getOneRedPackage</span><span class="params">(<span class="keyword">double</span> remainMoney, <span class="keyword">int</span> remainCount)</span> </span>&#123;<span class="comment">// 剩余钱数、剩余份数</span></span><br><span class="line"><span class="keyword">double</span> min = <span class="number">0.01</span>;<span class="comment">// 最小值</span></span><br><span class="line"><span class="keyword">double</span> max = remainMoney / remainCount * <span class="number">2</span>;<span class="comment">// 最大值</span></span><br><span class="line"><span class="keyword">double</span> money;<span class="comment">// 抢到的钱数</span></span><br><span class="line"><span class="keyword">if</span> (remainCount == <span class="number">1</span>) &#123;</span><br><span class="line">money = remainMoney;<span class="comment">// 就剩一个了，抢到的就是剩下的钱</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">money = Math.random() * max;<span class="comment">// 如果剩多个，抢到的就是0～max之间的随机数</span></span><br><span class="line">money = Math.max(money, min);<span class="comment">// 保证抢到的大于min</span></span><br><span class="line">&#125;</span><br><span class="line">money = (<span class="keyword">double</span>) Math.round(money * <span class="number">100</span>) / <span class="number">100</span>;<span class="comment">// 保留两位，精确到分</span></span><br><span class="line"><span class="keyword">return</span> money;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中，<code>Math.random()</code> 可以返回 0.0～1.0 之间的随机数。</p><p>根据以上算法，可以进一步写出分红包的算法：</p><div class="note info"><p>@param total  红包总金额，以元为单位，精确到分，系统测试的时候保证总金额至少够每人分得 1 分钱</p><p>@param personCount 分红包的总人数 &gt; 0</p><p>@return 每个人分得的钱数</p><p>规则遵循微信分红包规则 例如：</p><p>要求 每人分得的钱数总和 = total</p><p>每个人分得钱数必须是正数，且不能少于 1 分</p></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">double</span>[] getHongbao(<span class="keyword">double</span> total,<span class="keyword">int</span> personCount) &#123;</span><br><span class="line"><span class="keyword">if</span> (total &lt; personCount * <span class="number">0.01</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">null</span>;<span class="comment">// 发出红包份数太多/总钱数太少</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">double</span>[] result = <span class="keyword">new</span> <span class="keyword">double</span>[personCount];<span class="comment">// 抢到金额数组</span></span><br><span class="line"><span class="keyword">int</span> remainCount = personCount;<span class="comment">// 剩余份数</span></span><br><span class="line"><span class="keyword">double</span> remainMoney = total;<span class="comment">// 剩余钱数</span></span><br><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; personCount; i++) &#123;</span><br><span class="line"><span class="keyword">double</span> oneMoney;<span class="comment">// 一个</span></span><br><span class="line">oneMoney = getOneRedPackage(remainMoney, remainCount);<span class="comment">// 一个</span></span><br><span class="line">remainCount--;<span class="comment">// 剩余份数减一</span></span><br><span class="line">remainMoney -= oneMoney;<span class="comment">// 剩余钱数减少</span></span><br><span class="line">result[i] = oneMoney;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note success"><h4 id="2021-5-13-更新"><a href="#2021-5-13-更新" class="headerlink" title="2021.5.13 更新"></a>2021.5.13 更新</h4><p>分红包时最大值不能太大，否则剩下的连一分钱都分不到了。</p><p>所以对最大值需要增加判断，保证其他人至少要分到一分钱。</p><p>修改后的 <code>getOneRedPackage</code>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getOneRedPackage</span><span class="params">(<span class="keyword">double</span> remainMoney, <span class="keyword">int</span> remainCount)</span> </span>&#123;</span><br><span class="line"><span class="keyword">double</span> min = <span class="number">0.01</span>;</span><br><span class="line"><span class="keyword">double</span> max1 = remainMoney / remainCount * <span class="number">2</span>;</span><br><span class="line"><span class="keyword">double</span> max2 = remainMoney - (remainCount - <span class="number">1</span>) * <span class="number">0.01</span>;</span><br><span class="line"><span class="keyword">double</span> max = Math.min(max1, max2);</span><br><span class="line"><span class="keyword">double</span> money;</span><br><span class="line"><span class="keyword">if</span> (remainCount == <span class="number">1</span>) &#123;</span><br><span class="line">money = remainMoney;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">money = Math.random() * max;</span><br><span class="line">money = Math.max(money, min);</span><br><span class="line">&#125;</span><br><span class="line">money = (<span class="keyword">double</span>) Math.round(money * <span class="number">100</span>) / <span class="number">100</span>;</span><br><span class="line"><span class="keyword">return</span> money;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p><a href="https://github.com/SuperPung/Primary-Practice-Homeworks/tree/master/src/com/huawei/classroom/student/h51">Source code</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;Primary Practice h51&lt;/p&gt;</summary>
    
    
    
    
    <category term="Practice" scheme="https://blog.superpung.xyz/tags/Practice/"/>
    
  </entry>
  
</feed>
